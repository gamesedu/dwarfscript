{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","lib/directions.js","lib/dom-delegate.js","lib/index.js","lib/maps/index.js","lib/parser/detect-type.js","lib/parser/expression-parser.js","lib/parser/index.js","lib/unit/index.js","lib/unit/modules/index.js","lib/unit/modules/sensor.js","lib/unit/modules/wheels.js","lib/unit/processor.js","lib/view.js","lib/views/main-view.js","lib/views/map.js","node_modules/ak-eventemitter/index.js","node_modules/ak-eventemitter/lib/eventemitter.js","node_modules/ak-template/index.js","node_modules/ak-template/lib/template.js","node_modules/ak-template/node_modules/stluafed/index.js","node_modules/path-browserify/index.js","node_modules/process/browser.js","node_modules/stluafed/index.js"],"names":[],"mappings":"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WAAK,SAAL,CAAe,GAAf,CAAmB,iBAAnB;AACD;AAhHH;;AAAA;AAAA,EAAmC,IAAnC;;;ACTA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/OA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","let Application = require('./lib/index');\nlet application = new Application();\n\napplication.view.on('render', function run () {\n  application.run();\n});\ndocument.body.appendChild(application.view.render().el);\n","let relative = {\n  'ahead': 0,\n  'right': 1,\n  'behind': 2,\n  'left': - 1\n};\nlet absolute = ['north', 'west', 'south', 'east'];\n\nmodule.exports = {\n  'absolute': absolute,\n  'relative': relative,\n  'getAbsoluteFromTurn': (currentDirection, turn) => {\n    let dir = absolute.indexOf(currentDirection);\n    let clock = {\n      'clock': 1,\n      'right': 1,\n      'counter': - 1,\n      'left': - 1\n    };\n\n    dir = ((dir + clock[turn]) % absolute.length + absolute.length) % absolute.length;\n\n    return absolute[dir];\n  },\n  'getAbsoluteFromRelative': (currentDirection, rel) => {\n    let dir = absolute.indexOf(currentDirection);\n\n    if (! relative.hasOwnProperty(rel)) {\n      return rel;\n    }\n\n    dir = ((dir + relative[rel]) % absolute.length + absolute.length) % absolute.length;\n\n    return absolute[dir];\n  },\n  'getNextTileCoordinates': (coordinates, direction) => {\n    let x = coordinates.x;\n    let y = coordinates.y;\n    let movement = {\n      'north': () => {\n        y -= 1;\n      },\n      'west': () => {\n        x += 1;\n      },\n      'south': () => {\n        y += 1;\n      },\n      'east': () => {\n        x -= 1;\n      }\n    };\n\n    movement[direction]();\n\n    return {'x': x, 'y': y};\n  }\n};\n","/**\n * helper\n */\nlet matchAncestorOf = (child, parentSelector, stopAtElement) => {\n  if (! parentSelector) {\n    return stopAtElement;\n  }\n\n  if (! child || child === stopAtElement) {\n    return false;\n  }\n\n  if (child.matches(parentSelector)) {\n    return child;\n  }\n\n  return matchAncestorOf(child.parentElement, parentSelector, stopAtElement);\n};\n\n/**\n * @class DomDelegate\n */\nmodule.exports = class DomDelegate {\n  /**\n   * constructor\n   *\n   * @param {Element} root - root element which will be actually bound\n   */\n  constructor (root) {\n    if (! root) {\n      throw new Error('Missing `root` argument');\n    }\n\n    this.root = root;\n    this.events = {};\n  }\n\n  //The callback has the follow signature:\n  //\n  //```\n  //function callback(domNativeEvent, extraData)\n  //\n  //extraData = {\n  //  'matchedTarget': HTMLElement // this is the element which matches given selector\n  //}\n  //```\n  /**\n   * add listener\n   *\n   * @param {String} event\n   * @param {String} selector\n   * @param {Function} callback\n   * @param {*} [context]\n   * @return {DomDelegate}\n   */\n  on (event, selector, callback, context) {\n    if (typeof selector === 'function') {\n      context = callback;\n      callback = selector;\n      selector = '';\n    }\n\n    if (! callback) {\n      throw new Error('Missing `callback` argument');\n    }\n\n    selector = selector || '';\n    context = context || null;\n\n    let callbacks = this.events[event];\n\n    //We add only one listener per event and then look for matching delegation later\n    if (! callbacks) {\n      callbacks = this.events[event] = [];\n\n      let delegate = this.events[event].delegationCallback = (e) => {\n        this.events[event]\n          .filter((scope) => {\n            return ! scope.selector && e.target === this.root || matchAncestorOf(e.target, scope.selector, this.root);\n          }).forEach((scope) => {\n            let matchedTarget = scope.selector === '' && this.root || matchAncestorOf(e.target, scope.selector, this.root);\n\n            if (scope.context) {\n              return scope.callback.call(scope.context, e, {'matchedTarget': matchedTarget});\n            }\n\n            scope.callback(e, {'matchedTarget': matchedTarget});\n          });\n      };\n\n      this.root.addEventListener(event, delegate, true);\n    }\n\n    callbacks.push({\n      'selector': selector,\n      'callback': callback,\n      'context': context\n    });\n\n    return this;\n  }\n\n  /**\n   * remove event listener\n   *\n   * @param {String} [event]\n   * @param {String} [selector]\n   * @param {Function} [callback]\n   * @param {*} [context]\n   * @return {DomDelegate}\n   */\n  /*eslint complexity: [2, 20]*/\n  off (event, selector, callback, context) {\n    let arity = arguments.length;\n\n    if (typeof selector === 'function') {\n      context = callback;\n      callback = selector;\n      selector = '';\n    }\n\n    selector = selector || '';\n    context = context || null;\n\n    if (arity === 0) {\n      for (event in this.events) {\n        this.root.removeEventListener(event, this.events[event].delegationCallback, true);\n      }\n\n      this.events = {};\n\n      return this;\n    }\n\n    if (! this.events[event]) {\n      return this;\n    }\n\n    if (arity === 1) {\n      this.root.removeEventListener(event, this.events[event].delegationCallback, true);\n\n      delete this.events[event];\n\n      return this;\n    }\n\n    let delegationCallback = this.events[event].delegationCallback;\n\n    this.events[event] = this.events[event].filter((scope) => {\n      return ! (arity === 2 && scope.selector === selector\n        || arity === 3 && scope.selector === selector && scope.callback === callback\n        || arity === 4 && scope.selector === selector && scope.callback === callback && scope.context === context);\n    });\n    this.events[event].delegationCallback = delegationCallback;\n\n    if (! this.events[event].length) {\n      this.root.removeEventListener(event, this.events[event].delegationCallback, true);\n\n      delete this.events[event];\n    }\n\n    return this;\n  }\n\n  /**\n   * destructor\n   */\n  destroy () {\n    this.off();\n\n    this.root = null;\n    this.events = null;\n  }\n};\n","let MainView = require('./views/main-view');\nlet Unit = require('./unit');\nlet parse = require('./parser');\n\nlet maps = require('./maps');\n\nmodule.exports = class Application {\n  constructor () {\n    this.view = new MainView({\n      'map': maps[0]\n    });\n    this.dwarf = new Unit({\n      'type': 'dwarf',\n      'name': 'Gimlet',\n      'modules': [\n        'legs',\n        'sensor'\n      ],\n      'map': this.view.map\n    });\n\n    this.view.on('program.run', this.onProgramRun.bind(this));\n    this.view.on('game.victory', this.onVictory.bind(this));\n    this.dwarf.on('unit.move', this.onUnitMove.bind(this));\n  }\n\n  run () {\n    this.dwarf.position = {'x': 1, 'y': 2};\n    this.view.map.drawUnit(this.dwarf);\n  }\n\n  onProgramRun (e, code) {\n    if (this.dwarf.processor.running) {\n      this.dwarf.processor.running = false;\n      this.view.runButton.innerHTML = 'RUN';\n      this.view.runButton.classList.remove('ds-execution-stop');\n      return;\n    }\n\n    let program = parse(code);\n\n    if (program.status === 'ok') {\n      this.dwarf.run(program.tree);\n      this.view.runButton.innerHTML = 'STOP';\n      this.view.runButton.classList.add('ds-execution-stop');\n    }\n    this.view.renderParsingLog(program.log);\n  }\n\n  onVictory () {\n    /* eslint-disable no-alert */\n    this.onProgramRun();\n    alert('Wow congrats you won !!');\n  }\n\n  onUnitMove (e, unit, coordinates) {\n    this.view.map.moveUnit(unit, coordinates);\n  }\n};\n","module.exports = [\n  `\nWWWWWWWWWWWWWWW\nW_W_____W____WW\nW_W_W_W___WW__W\nW___W_WWWWWWW_W\nWWWWW__WW___W_W\nW___WW_W__W___W\nW_W____W_WWWWWW\nW_WWWWWW______W\nW__W_____WWWW_W\nW_WWWWWW___W__W\nW_W____WWWWW_WW\nW_W_WW_W___W__W\nW_W_WWWW_W_WW_W\nW____WV__W____W\nWWWWWWWWWWWWWWW\n`,\n  `ABBBBBBBBBBBC\nDEEEEEEEEEEEF\nG___________I\nG___MN______I\nG___OP______I\nG___QR______I\nG___ST______I\nG___________I\nG_______MN__I\nG_______IG__I\nJKKKKKKKVUKKL`\n];\n","module.exports = function detectType (line) {\n  let patterns = {\n    'if': /^if\\([a-zA-z0-9 .+\\-*/!='\\(\\)]{0,}\\)\\{$/,\n    'assign': /=/,\n    'call': /\\([a-zA-z0-9, +\\-*/='\\(\\)]{0,}\\)$/,\n    'closingBracket': /^}$/,\n    'string': /'[a-zA-z0-9, +\\-*/='\\(\\)]{0,}'/\n  };\n\n  for (let key in patterns) {\n    if (line.match(patterns[key])) {\n      return {'type': key, 'status': 'ok'};\n    }\n  }\n\n  return {'type': 'unknown', 'status': 'error'};\n};\n","let detectType = require('./detect-type');\n\nlet booleanOperators = {\n  '==': 'equals',\n  '!=': 'notequals'\n};\n\nlet expressionParser = module.exports = {\n  'if': (line) => {\n    let info = {};\n    let start = line.indexOf('(') + 1;\n    let end = line.lastIndexOf(')');\n    let exp = line.substring(start, end);\n    //let exp = line.match(/\\([a-zA-z0-9 +\\-*/='\\(\\)]{0,}\\)/g)[0];\n\n    info.condition = expressionParser.boolean(exp);\n    info.type = 'if';\n\n    return info;\n  },\n  'call': (line) => {\n    let info = {};\n    let start = line.indexOf('(') + 1;\n    let end = line.lastIndexOf(')');\n    let paren = line.substring(start, end);\n    //let paren = line.match(/\\([a-zA-z0-9, +\\-*/='\\(\\)]{0,}\\)/g)[0];\n    let methodName = line.split('(')[0];\n\n    info.method = methodName.split('.');\n    info.arguments = [];\n    info.type = 'call';\n\n    if (paren.length) {\n      let args = paren.split(',');\n\n      for (let i = 0, len = args.length; i < len; i += 1) {\n        info.arguments.push(quickParse(args[i]));\n      }\n    }\n\n    return info;\n  },\n  'assign': (line) => {\n    let info = {};\n    let splitLine = line.split('=');\n\n    info.variable = splitLine[0];\n    info.value = splitLine[1];\n    info.type = 'assign';\n\n    return info;\n  },\n  'string': (line) => {\n    let info = {};\n    let quotes = line.match(/'[a-zA-z0-9 +\\-*/='\\(\\)]{0,}'/g)[0];\n\n    info.type = 'string';\n    info.value = quotes.substring(1, quotes.length - 1);\n\n    return info;\n  },\n  'boolean': (line) => {\n    let info = {};\n    let operator = '';\n\n    for (let key in booleanOperators) {\n      if (line.match(key)) {\n        operator = key;\n      }\n    }\n\n    line = line.split(operator);\n\n    info.operator = booleanOperators[operator];\n    info.a = quickParse(line[0]);\n    info.b = quickParse(line[1]);\n    info.type = 'boolean';\n\n    return info;\n  }\n};\n\nfunction quickParse (exp) {\n  let type = detectType(exp);\n\n  if (type.status === 'error') {\n    throw new Error(`couldnt determine type of ${exp}`);\n  }\n\n  return expressionParser[type.type](exp);\n}\n","let expressionParser = require('./expression-parser');\nlet detectType = require('./detect-type');\n\nmodule.exports = function parse (code) {\n  let program = {\n    'log': [],\n    'status': 'ok',\n    'tree': [],\n    'weight': 0\n  };\n\n  let recursionsCount = 0;\n\n  // code = normalizeCode(code);\n\n  let lines = code.split('\\n');\n\n  program.tree = clip (0, lines.length);\n\n  function clip (start, end) {\n    recursionsCount += 1;\n\n    if (recursionsCount > 200) {\n      logError(start, 'Parser error: Too many recursions');\n      return [];\n    }\n\n    let tree = [];\n\n    for (let i = start; i < end; i += 1) {\n      let line = lines[i].replace(/ /g, '');\n\n      if (line.length === 0) {\n        continue;\n      }\n\n      let lineType = detectType(line);\n\n      if (lineType.status === 'error') {\n        logError(i, 'Parser error: Could not determine line type');\n        return [];\n      }\n\n      lineType = lineType.type;\n\n      if (lineType === 'closingBracket') {\n        continue;\n      }\n\n      let operation = {\n        'type': lineType,\n        'raw': line,\n        'subTree': []\n      };\n      let lineInfo = expressionParser[lineType](line);\n\n      for (let key in lineInfo) {\n        operation[key] = lineInfo[key];\n      }\n\n      if (lineType === 'if') {\n        let endif = findClosingBracket (i, end);\n        let restartAt = endif;\n\n        if (endif === 'error') {\n          logError(i, 'Parser error: could not find matching closing bracket');\n          return [];\n        }\n\n        operation.subTree = clip(i + 1, endif);\n\n        //We check the next line if there is a if\n        let nextLine = lines[endif + 1];\n\n        nextLine = nextLine.replace(/ /g, '');\n\n        if (nextLine.match(/^else\\{$/)) {\n          let endelse = findClosingBracket (endif + 1, end);\n\n          operation.elseTree = clip(endif + 2, endelse);\n\n          restartAt = endelse;\n        }\n\n        i = restartAt;\n      }\n\n      tree.push(operation);\n      program.weight += 1;\n    }\n\n    return tree;\n  }\n\n  function findClosingBracket (start, end) {\n    let bracketCounter = 0;\n\n    for (let i = start; i <= end; i += 1) {\n      let line = lines[i];\n\n      if (line.match(/\\{/)) {\n        bracketCounter += 1;\n      }\n      if (line.match(/\\}/)) {\n        bracketCounter -= 1;\n      }\n      if (bracketCounter === 0) {\n        return i;\n      }\n    }\n\n    return 'error';\n  }\n\n  function logError (line, message) {\n    program.log.push({\n      'line': line,\n      'message': message\n    });\n    program.status = 'error';\n  }\n\n  return program;\n};\n\n// function normalizeCode (rawCode) {\n//   let normalizedCode = '';\n//\n//   normalizedCode = rawCode.replace(/\\n\\s*}\\s*else\\s*{\\s*\\n/g, '\\n}\\nelse {\\n');\n//\n//   return normalizedCode;\n// }\n","let fs = require('fs');\nlet path = require('path');\nlet template = require('ak-template');\nlet defaults = require('stluafed');\n\nlet View = require('../view');\nlet Processor = require('./processor');\n\nlet modules = require('./modules');\n\n// http://spritespace.blogspot.fr/2013/10/to-start-of-with-here-are-collection-of.html\n// http://game-icons.net/\n// http://opengameart.org/sites/default/files/dungeon_pre.png + http://opengameart.org/sites/default/files/dungeon_tiles_2.png\n// http://opengameart.org/content/a-blocky-dungeon\n\nmodule.exports = class Unit extends View {\n  constructor (options = {}) {\n    super(options);\n\n    this.template = template(fs.readFileSync(path.join(__dirname, '../templates/unit.tpl'), 'utf-8'));\n    this.options = defaults(options, {\n      'events': [\n      ],\n      'type': 'robot',\n      'name': 'anonymous',\n      'direction': 'west',\n      'fuel': 10,\n      'modules': [\n        'wheels'\n      ]\n    });\n\n    this.map = options.map;\n    this.programContext = {};\n    this.processor = new Processor({\n      'parent': this\n    });\n\n    for (let moduleName of this.options.modules) {\n      this.addModule(moduleName);\n    }\n  }\n\n  run (program) {\n    this.processor.run(program);\n  }\n\n  render () {\n    this.emit('rendering');\n    this.renderTemplate(this.options);\n    this.emit('render');\n\n    return this;\n  }\n\n  addModule (module) {\n    if (! modules[module]) {\n      throw new Error(`Could not find module \"${module}\"`);\n    }\n\n    this[module] = modules[module](this);\n  }\n\n  useFuel (amt = 1) {\n    if (this.type === 'robot') {\n      this.fuel -= amt;\n    }\n  }\n  get fuel () {\n    return this.options.fuel;\n  }\n\n  set direction (direction) {\n    this.options.direction = direction;\n  }\n  get direction () {\n    return this.options.direction;\n  }\n  set name (name) {\n    throw new Error(`Attempting to assign ${name} to name which is a read only property`);\n  }\n  get name () {\n    return this.options.name;\n  }\n  set type (type) {\n    throw new Error(`Attempting to assign ${type} to type which is a read only property`);\n  }\n  get type () {\n    return this.options.type;\n  }\n};\n","module.exports = {\n  'legs': require('./wheels'),\n  'wheels': require('./wheels'),\n  'sensor': require('./sensor')\n};\n","let directions = require('../../directions');\n\nmodule.exports = function sensor (parent) {\n  //let scanRange = 1;\n  let info = {\n    'general': {\n      'status': 'ok'\n    },\n    'scan': {\n      'duration': 20\n    }\n  };\n\n  return {\n    'info': (infoName) => {\n      return info[infoName];\n    },\n    'scan': (direction = 'ahead') => {\n      let absoluteDirection = directions.getAbsoluteFromRelative(parent.direction, direction);\n      let lookAt = directions.getNextTileCoordinates(parent.position, absoluteDirection);\n      let tile = parent.map.selectTile(lookAt);\n\n      if (! tile || tile.type === 'wall') {\n        return 'obstacle';\n      }\n\n      return 'clear';\n    }\n  };\n};\n","let directions = require('../../directions');\n\nmodule.exports = function wheels (parent) {\n  let info = {\n    'general': {\n      'status': 'ok'\n    },\n    'turn': {\n      'duration': 150\n    },\n    'forward': {\n      'duration': 300\n    }\n  };\n\n  return {\n    'info': (infoName) => {\n      return info[infoName];\n    },\n    'turn': function turn (direction = 'clock') {\n      for (let i = 0, len = directions.absolute.length; i < len; i += 1) {\n        parent.el.classList.remove(`ds-direction-${directions.absolute[i]}`);\n      }\n\n      parent.direction = directions.getAbsoluteFromTurn(parent.direction, direction);\n      parent.el.classList.add(`ds-direction-${parent.direction}`);\n\n      return parent;\n    },\n    'forward': function forward () {\n      let newCoordinates = directions.getNextTileCoordinates(parent.position, parent.direction);\n\n      if (parent.fuel <= 0) {\n        parent.log(`${parent.name} the ${parent.type} has no more fuel.`);\n        return;\n      }\n\n      parent.useFuel();\n      parent.emit('unit.move', parent, newCoordinates);\n    }\n  };\n};\n","module.exports = class Processor {\n  constructor (options = {}) {\n    this.parent = options.parent;\n    this.executionLog = [];\n  }\n\n  run (program) {\n    let i = 0;\n\n    if (! this.running) {\n      this.running = true;\n\n      this.log('Program starting from the top');\n\n      this.nextLine(program, i, () => {\n        this.running = false;\n        this.run(program);\n      });\n    }\n  }\n\n  nextLine (program, i, callback) {\n    if (! this.running) {\n      return;\n    }\n\n    let line = program[i];\n    let lineType = line.type;\n    let last = i + 1 === program.length;\n\n    let nextContent = this.nextLine.bind(this, program, i + 1, callback);\n\n    if (last) {\n      nextContent = callback;\n    }\n\n    let next = function next (delay = 0) {\n      setTimeout(function exec () {\n        nextContent();\n      }, delay);\n    };\n\n    if (lineType === 'assign') {\n      //this[program[i]] && this[program[i]]();\n      next();\n    }\n    if (lineType === 'if') {\n      if (this.testCondition(line.condition)) {\n        this.nextLine(line.subTree, 0, next);\n      } else if (line.elseTree) {\n        this.nextLine(line.elseTree, 0, next);\n      } else {\n        next();\n      }\n    }\n    if (lineType === 'call') {\n      let methodInfo = this.execCall(program[i]);\n\n      next(methodInfo.info.duration);\n    }\n  }\n\n  execCall (call) {\n    let methodPath = call.method;\n    let methodInfo = {};\n    let methodContext = 'programContext';\n    let methodName = '';\n    let parameters = [];\n\n    if (methodPath.length === 1) {\n      methodName = methodPath[0];\n    }\n    if (methodPath.length === 2) {\n      methodContext = methodPath[0];\n      methodName = methodPath[1];\n    }\n\n    if (! this.parent[methodContext] || ! this.parent[methodContext][methodName]) {\n      throw new Error(`${this.parent.name} the ${this.parent.type} cannot run \"${methodPath.join('.')}(${parameters})\"`);\n    }\n\n    for (let i = 0, len = call.arguments.length; i < len; i += 1) {\n      parameters.push(this.getArgumentValue(call.arguments[i]));\n    }\n\n    //get info from module\n    methodInfo = this.parent[methodContext].info && this.parent[methodContext].info(methodName);\n\n    return {\n      'return': this.parent[methodContext][methodName].apply(this.parent, parameters),\n      'info': methodInfo\n    };\n  }\n\n  testCondition (condition) {\n    if (condition.operator === 'equals') {\n      return this.getArgumentValue(condition.a) === this.getArgumentValue(condition.b);\n    }\n    if (condition.operator === 'notequals') {\n      return this.getArgumentValue(condition.a) !== this.getArgumentValue(condition.b);\n    }\n    return false;\n  }\n\n  getArgumentValue (arg) {\n    if (arg.type === 'string') {\n      return arg.value;\n    }\n    if (arg.type === 'call') {\n      let value = this.execCall(arg);\n\n      return value.return;\n    }\n\n    return false;\n  }\n\n  log (text) {\n    /* eslint-disable no-console */\n    console.log(text);\n    this.executionLog.push(text);\n  }\n};\n","let EventEmitter = require('ak-eventemitter');\nlet DomDelegate = require('./dom-delegate');\n\nmodule.exports = class View extends EventEmitter {\n  constructor (options = {}) {\n    super(options);\n\n    this.events = {};\n    this.element = null;\n    this.delegate = null;\n    this.options = options;\n  }\n\n  /**\n   * view's main DOM element\n   *\n   * @return {Element}\n   */\n  get el () {\n    return this.element;\n  }\n\n  /**\n   * bind events to the view's main DOM element\n   *\n   * @throws Error - if view has not been rendered\n   *\n   * @param {Array<ViewEvent>} [events]\n   * @return {View}\n   */\n  bind (events = this.options.events) {\n    if (! this.element) {\n      throw new Error('View has not been rendered yet.');\n    }\n\n    if (! events) {\n      return this;\n    }\n\n    //Will try to unbind events first, to avoid duplicates\n    this.unbind(events);\n    this.handleEvents('on', events);\n\n    return this;\n  }\n\n  /**\n   * unbind events from the view's main DOM element\n   *\n   * @throws Error - if view has not been rendered\n   *\n   * @param {Array<ViewEvent>} [events]\n   * @return {View}\n   */\n  unbind (events = this.options.events) {\n    if (! this.element) {\n      throw new Error('View has not been rendered yet.');\n    }\n\n    if (! events) {\n      this.delegate.off();\n\n      return this;\n    }\n\n    this.handleEvents('off', events);\n\n    return this;\n  }\n\n  /**\n   * Template rendering\n   *\n   * @param  {Object} data - data to display\n   * @return {WidgetView}\n   */\n  renderTemplate (data) {\n    //Will always unbind before rendering if main element is already set.\n    if (this.element) {\n      this.unbind();\n      this.delegate.destroy();\n    }\n\n    if (! this.template) {\n      throw new Error('Missing `this.template`');\n    }\n\n    //Only takes the first child element of the template.\n    this.element = this.domify(this.template(data || {}));\n    this.delegate = new DomDelegate(this.element);\n\n    this.bind();\n\n    return this;\n  }\n\n  /**\n   * render the template (proxy for `#renderTemplate()`)\n   *\n   * @see #renderTemplate()\n   * @event rendering - before rendering\n   * @event render - after render\n   *\n   * @return {View}\n   */\n  render () {\n    this.emit('rendering');\n    this.renderTemplate.apply(this, arguments);\n    this.emit('render');\n\n    return this;\n  }\n\n  domify (str) {\n    let div = document.createElement('div');\n\n    div.innerHTML = str;\n\n    return div.firstElementChild;\n  }\n\n  handleEvents (action, events) {\n    let event;\n    let selector;\n    let callback;\n    let context;\n    let scope;\n\n    for (let i = 0, len = events.length; i < len; i += 1) {\n      scope = events[i];\n      event = scope[0];\n      selector = scope[2] ? scope[1] : null;\n      callback = scope[2] ? scope[2] : scope[1];\n      context = null;\n\n      if (typeof callback !== 'function' && typeof this[callback] === 'function') {\n        callback = this[callback];\n        /*eslint consistent-this: 0*/\n        context = this;\n      }\n\n      if (typeof callback !== 'function') {\n        throw new Error('Invalid callback for event [' + event + ', ' + selector + ', ' + callback);\n      }\n\n      if (! selector) {\n        this.delegate[action](event, '', callback, context);\n\n        continue;\n      }\n\n      selector = Array.isArray(selector) ? selector : [selector];\n\n      for (let j = 0; j < selector.length; j += 1) {\n        this.delegate[action](event, selector[j], callback, context);\n      }\n    }\n  }\n};\n","let fs = require('fs');\nlet path = require('path');\nlet template = require('ak-template');\nlet defaults = require('stluafed');\n\nlet View = require('../view');\nlet Map = require('./map');\n\nmodule.exports = class MainView extends View {\n  constructor (options = {}) {\n    super(options);\n\n    this.template = template(fs.readFileSync(path.join(__dirname, '../templates/main-view.tpl'), 'utf-8'));\n    this.lineNumberTemplate = template(fs.readFileSync(path.join(__dirname, '../templates/line-number.tpl'), 'utf-8'));\n    this.options = defaults(options, {\n      'events': [\n        ['click', '.ds-run', 'onRunClick'],\n        ['keypress', '#ds-editor-input', 'onEnter']\n      ]\n    });\n\n    this.map = new Map({\n      'map': this.options.map\n    });\n\n    this.map.on('map.walk.victory', () => {\n      this.emit('game.victory');\n    });\n  }\n\n  render () {\n    this.emit('rendering');\n    this.renderTemplate.apply(this, arguments);\n\n    let mapPanel = this.el.querySelector('#ds-map-panel');\n\n    mapPanel.appendChild(this.map.render().el);\n\n    this.runButton = this.el.querySelector('.ds-run');\n    this.editor = {\n      'numbers': this.el.querySelector('#ds-editor-line-numbers'),\n      'input': this.el.querySelector('#ds-editor-input')\n    };\n\n    this.editor.input.value = `if (sensor.scan('right') == 'clear') {\n legs.turn('right')\n}\nif (sensor.scan('ahead') == 'clear') {\n legs.forward()\n}\nelse {\n if(sensor.scan('left') == 'clear') {\n  legs.turn('left')\n }\n else {\n  legs.turn('right')\n }\n}\n`;\n\n    this.onEnter();\n\n    this.emit('render');\n\n    return this;\n  }\n\n  renderParsingLog (log) {\n    let lineNumbers = this.el.querySelectorAll('.ds-editor-line-number');\n\n    for (let i = 0, len = lineNumbers.length; i < len; i += 1) {\n      lineNumbers[i].classList.remove('ds-parsing-error');\n    }\n\n    for (let i = 0, len = log.length; i < len; i += 1) {\n      let displayedNumber = log[i].line + 1;\n      let lineNumber = this.el.querySelector(`.ds-editor-line-number[data-line-number=\"${displayedNumber}\"]`);\n\n      if (! lineNumber) {\n        return;\n      }\n\n      lineNumber.classList.add('ds-parsing-error');\n      lineNumber.title = log[i].message;\n    }\n  }\n\n  onRunClick () {\n    let rawCode = this.editor.input.value;\n\n    this.emit('program.run', rawCode);\n  }\n\n  onEnter () {\n    let lineCount = this.editor.input.value.split('\\n').length;\n    let lineNumbersHtml = '';\n\n    for (let i = 1; i <= lineCount + 1; i += 1) {\n      lineNumbersHtml += this.lineNumberTemplate({'number': i});\n    }\n\n    this.editor.input.rows = lineCount + 3;\n    this.editor.numbers.innerHTML = lineNumbersHtml;\n  }\n};\n","let fs = require('fs');\nlet path = require('path');\nlet template = require('ak-template');\nlet defaults = require('stluafed');\n\nlet View = require('../view');\n\nlet maps = require('../maps');\n\nmodule.exports = class Map extends View {\n  constructor (options = {}) {\n    super(options);\n\n    this.template = template(fs.readFileSync(path.join(__dirname, '../templates/map.tpl'), 'utf-8'));\n    this.mapTileTemplate = template(fs.readFileSync(path.join(__dirname, '../templates/map-tile.tpl'), 'utf-8'));\n\n    this.options = defaults(options, {\n      'events': [],\n      'map': maps[0]\n    });\n\n    this.map = this.initMap(options.map);\n  }\n\n  render () {\n    this.emit('rendering');\n    this.renderTemplate.apply(this, arguments);\n\n    let mapHtml = '';\n\n    for (let y = 0; y < this.map.length; y += 1) {\n      for (let x = 0; x < this.map[y].length; x += 1) {\n        mapHtml += this.mapTileTemplate(this.map[y][x]);\n      }\n    }\n\n    this.el.innerHTML = mapHtml;\n    this.saveTileElements();\n\n    this.emit('render');\n\n    return this;\n  }\n\n  initMap (plan) {\n    let map = [];\n\n    plan = plan.split('\\n');\n\n    for (let y = 0, ylen = plan.length; y < ylen; y += 1) {\n      let row = plan[y].split('');\n\n      map.push([]);\n\n      for (let x = 0, xlen = row.length; x < xlen; x += 1) {\n        let tile = {\n          'x': x,\n          'y': y,\n          'type': 'floor'\n        };\n\n        if (plan[y][x] === 'W') {\n          tile.type = 'wall';\n          tile.imgClass = plan[y][x];\n        }\n        if (plan[y][x] === 'V') {\n          tile.type = 'victory';\n          tile.imgClass = 'victory';\n        }\n\n        map[y].push(tile);\n      }\n    }\n\n    return map;\n  }\n  saveTileElements () {\n    for (let y = 0; y < this.map.length; y += 1) {\n      for (let x = 0; x < this.map[y].length; x += 1) {\n        let selector = `.ds-map-tile[data-position-x=\"${x}\"][data-position-y=\"${y}\"]`;\n\n        this.map[y][x].el = this.el.querySelector(selector);\n      }\n    }\n  }\n  selectTile (coordinates) {\n    if (! coordinates) {\n      throw new Error('No coordinates provided for selectTile');\n    }\n    let result = null;\n\n    result = this.map[coordinates.y] && this.map[coordinates.y][coordinates.x];\n\n    return result;\n  }\n  drawUnit (unit) {\n    let tile = this.selectTile(unit.position);\n\n    if (unit.el) {\n      unit.el.parentElement.removeChild(unit.el);\n    }\n    if (! unit.el) {\n      unit.render();\n    }\n\n    tile.el.appendChild(unit.el);\n  }\n\n  moveUnit (unit, coordinates) {\n    let tile = this.selectTile(coordinates);\n\n    if (tile && tile.type !== 'wall') {\n      unit.position = coordinates;\n      this.drawUnit(unit);\n\n      if (tile.type === 'victory') {\n        this.emit('map.walk.victory');\n      }\n      return;\n    }\n    unit.processor.log('move disallowed');\n  }\n};\n","module.exports = require('./lib/eventemitter');\n","'use strict';\n\n/**\n * Export `EventEmitter`\n *\n * @param {Object} options (optional)\n * @return {EventEmitter}\n */\nvar EventEmitter = module.exports = function (options) {\n  options = options || {};\n  this._eventEmitter = {};\n  this._eventEmitter.tree = {'children': {}};\n  this._eventEmitter.delimiter = options.delimiter || '.';\n};\n\n/**\n * Call all callbacks for given tree\n *\n * @see #_searchTree();\n *\n * @param {Object} tree\n * @param {arguments} args\n */\nEventEmitter.prototype._emit = function (tree, args) {\n  var callbacks = tree.callbacks;\n\n  if (! callbacks) {\n    return this;\n  }\n\n  var argc = args.length;\n\n  for (\n    var i = 0,\n    len = callbacks.length,\n    callback;\n    i < len;\n    i += 1\n  ) {\n    callback = callbacks[i];\n\n    if (argc === 1) {\n      callback.fn.call(callback.context, args[0]);\n    } else if (argc === 2) {\n      callback.fn.call(callback.context, args[0], args[1]);\n    } else {\n      callback.fn.apply(callback.context, args);\n    }\n\n    if (callback.once) {\n      callbacks.splice(i, 1);\n\n      i -= 1;\n      len -= 1;\n\n      if (callbacks.length === 0) {\n        tree.callbacks = undefined;\n      }\n    }\n  }\n};\n\n/**\n * Parse given tree for given ns\n *\n * @see #emit();\n *\n * @param {Object} tree\n * @param {Array} ns\n * @param {Integer} start\n * @param {arguments} args\n */\nEventEmitter.prototype._searchTree = function (tree, ns, start, args) {\n  for (var i = start,\n    len = ns.length,\n    currentNs,\n    currentTree,\n    wildTree;\n    i < len;\n    i += 1\n  ) {\n    wildTree = tree.children['*'];\n\n    if (wildTree) {\n      if (wildTree.callbacks) {\n        this._emit(wildTree, args);\n      }\n\n      this._searchTree(wildTree, ns, i + 1, args);\n    }\n\n    currentNs = ns[i];\n    currentTree = tree.children[currentNs];\n\n    if (! currentTree) {\n      return this;\n    }\n\n    tree = currentTree;\n  }\n\n  if (currentTree) {\n    this._emit(currentTree, args);\n  }\n};\n\n/**\n * Add event listener\n *\n * @param {String} ns\n * @param {Function} callback\n * @param {Object} options (optional)\n * @return {EventEmitter}\n */\nEventEmitter.prototype.on = function (ns, callback, context, once) {\n  ns = ns.split(this._eventEmitter.delimiter);\n  var tree = this._eventEmitter.tree;\n  var currentNs;\n  var currentTree;\n\n  for (var i = 0, len = ns.length; i < len; i += 1) {\n    currentNs = ns[i];\n    currentTree = tree.children[currentNs];\n\n    if (! currentTree) {\n      currentTree = tree.children[currentNs] = {'children': {}};\n    }\n\n    tree = currentTree;\n  }\n\n  if (! tree.callbacks) {\n    tree.callbacks = [];\n  }\n\n  tree.callbacks.push({\n    'fn': callback,\n    'context': context ? context : this,\n    'once': !! once\n  });\n\n  return this;\n};\n\n/**\n * Remove event listener\n *\n * @param {String} ns\n * @param {Function} callback\n * @param {Object} options (optional)\n * @return {EventEmitter}\n */\nEventEmitter.prototype.off = function (ns, callback, context) {\n  if (! ns) {\n    this._eventEmitter.tree = {'children': {}};\n\n    return this;\n  }\n\n  ns = ns.split(this._eventEmitter.delimiter);\n  var tree = this._eventEmitter.tree;\n  var currentTree;\n\n  for (var i = 0, len = ns.length; i < len; i += 1) {\n    currentTree = tree.children[ns[i]];\n\n    if (! currentTree) {\n      return this;\n    }\n\n    tree = currentTree;\n  }\n\n  if (! callback) {\n    tree.callbacks = undefined;\n\n    return this;\n  }\n\n  if (! tree.callbacks) {\n    return this;\n  }\n\n  for (\n    var i2 = 0,\n    callbacks = tree.callbacks,\n    len2 = callbacks.length,\n    currentCallback;\n    i2 < len2;\n    i2 += 1\n  ) {\n    currentCallback = callbacks[i2];\n\n    if (currentCallback.fn === callback) {\n      if (context && context !== currentCallback.context) {\n        continue;\n      }\n\n      callbacks.splice(i2, 1);\n\n      break;\n    }\n  }\n\n  if (! callbacks.length) {\n    tree.callbacks = undefined;\n  }\n\n  return this;\n};\n\n/**\n * Emit event\n *\n * @param {String} ns\n * @param {*} ... (optional)\n * @return {EventEmitter}\n */\nEventEmitter.prototype.emit = function (ns) {\n  ns = ns.split(this._eventEmitter.delimiter);\n\n  this._searchTree(this._eventEmitter.tree, ns, 0, arguments);\n\n  return this;\n};\n\n/**\n * Add event listener for once\n *\n * @param {String} ns\n * @param {Function} callback\n * @param {Object} options (optional)\n * @return {EventEmitter}\n */\nEventEmitter.prototype.once = function (ns, callback, context) {\n  this.on(ns, callback, context, true);\n\n  return this;\n};\n","module.exports = require('./lib/template');\n","'use strict';\n\n/**\n * Dependencies\n */\nvar defaults = require('stluafed');\n\n/**\n * Export `template`\n *\n * @param {String} str\n * @return {Function}\n */\nvar template = module.exports = function (str) {\n  var tpl = template.cache[str];\n\n  if (tpl) {\n    return tpl;\n  }\n\n  /*jshint evil: true*/\n  tpl = (new Function(\n    'locals',\n    'locals = this.defaults(locals || {}, this.globals);' +\n    'var __p = [];' +\n    '__p.push(\\'' +\n    str.replace(/[\\r\\t\\n]/g, ' ')\n      .replace(/'(?=[^%]*%>)/g, '\\t')\n      .split('\\'').join('\\\\\\'')\n      .split('\\t').join('\\'')\n      .replace(/<%=(.+?)%>/g, '\\',$1,\\'')\n      .replace(/<%-(.+?)%>/g, '\\',this.escape($1),\\'')\n      .split('<%').join('\\');')\n      .split('%>').join('__p.push(\\'') +\n    '\\');return __p.join(\\'\\');'\n  )).bind({\n    'defaults': defaults,\n    'globals': template.globals,\n    'escape': template.escape\n  });\n  /*jshint evil: false*/\n\n  template.cache[str] = tpl;\n\n  return tpl;\n};\n\n/**\n * Globals are merged into `locals`\n */\ntemplate.globals = {};\n\n/**\n * Cache\n */\ntemplate.cache = {};\n\n/**\n * Escape function for <%- variable %>, can be overridden (default escape HTML)\n *\n * @param {String} str\n * @return {Function}\n */\ntemplate.escape = function (str) {\n  return (str + '')\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39');\n};\n","'use strict';\n\n/**\n * Merge default values.\n *\n * @param {Object} dest\n * @param {Object} defaults\n * @return {Object}\n * @api public\n */\nvar defaults = function (dest, src, recursive) {\n  for (var prop in src) {\n    if (recursive && dest[prop] instanceof Object && src[prop] instanceof Object) {\n      dest[prop] = defaults(dest[prop], src[prop], true);\n    } else if (! (prop in dest)) {\n      dest[prop] = src[prop];\n    }\n  }\n\n  return dest;\n};\n\n/**\n * Expose `defaults`.\n */\nmodule.exports = defaults;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\n/**\n * Merge default values.\n *\n * @param {Object} dest destination object\n * @param {Object} src source object\n * @param {Boolean} recursive merge into destination recursively (default: false)\n * @return {Object} dest object\n */\nvar defaults = function (dest, src, recursive) {\n  for (var prop in src) {\n    if (! src.hasOwnProperty(prop)) {\n      continue;\n    }\n\n    if (recursive && dest[prop] instanceof Object && src[prop] instanceof Object) {\n      dest[prop] = defaults(dest[prop], src[prop], true);\n    } else if (! (prop in dest)) {\n      dest[prop] = src[prop];\n    }\n  }\n\n  return dest;\n};\n\n/**\n * Expose `defaults`.\n */\nmodule.exports = defaults;\n"],"preExisting":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsImxpYi9kaXJlY3Rpb25zLmpzIiwibGliL2RvbS1kZWxlZ2F0ZS5qcyIsImxpYi9pbmRleC5qcyIsImxpYi9tYXBzL2luZGV4LmpzIiwibGliL3BhcnNlci9kZXRlY3QtdHlwZS5qcyIsImxpYi9wYXJzZXIvZXhwcmVzc2lvbi1wYXJzZXIuanMiLCJsaWIvcGFyc2VyL2luZGV4LmpzIiwibGliL3VuaXQvaW5kZXguanMiLCJsaWIvdW5pdC9tb2R1bGVzL2luZGV4LmpzIiwibGliL3VuaXQvbW9kdWxlcy9zZW5zb3IuanMiLCJsaWIvdW5pdC9tb2R1bGVzL3doZWVscy5qcyIsImxpYi91bml0L3Byb2Nlc3Nvci5qcyIsImxpYi92aWV3LmpzIiwibGliL3ZpZXdzL21haW4tdmlldy5qcyIsImxpYi92aWV3cy9tYXAuanMiLCJub2RlX21vZHVsZXMvYWstZXZlbnRlbWl0dGVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2FrLWV2ZW50ZW1pdHRlci9saWIvZXZlbnRlbWl0dGVyLmpzIiwibm9kZV9tb2R1bGVzL2FrLXRlbXBsYXRlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2FrLXRlbXBsYXRlL2xpYi90ZW1wbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9hay10ZW1wbGF0ZS9ub2RlX21vZHVsZXMvc3RsdWFmZWQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcGF0aC1icm93c2VyaWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9zdGx1YWZlZC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBSSxjQUFjLFFBQVEsYUFBUixDQUFsQjtBQUNBLElBQUksY0FBYyxJQUFJLFdBQUosRUFBbEI7O0FBRUEsWUFBWSxJQUFaLENBQWlCLEVBQWpCLENBQW9CLFFBQXBCLEVBQThCLFNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvT0E7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2hPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibGV0IEFwcGxpY2F0aW9uID0gcmVxdWlyZSgnLi9saWIvaW5kZXgnKTtcbmxldCBhcHBsaWNhdGlvbiA9IG5ldyBBcHBsaWNhdGlvbigpO1xuXG5hcHBsaWNhdGlvbi52aWV3Lm9uKCdyZW5kZXInLCBmdW5jdGlvbiBydW4gKCkge1xuICBhcHBsaWNhdGlvbi5ydW4oKTtcbn0pO1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhcHBsaWNhdGlvbi52aWV3LnJlbmRlcigpLmVsKTtcbiIsImxldCByZWxhdGl2ZSA9IHtcbiAgJ2FoZWFkJzogMCxcbiAgJ3JpZ2h0JzogMSxcbiAgJ2JlaGluZCc6IDIsXG4gICdsZWZ0JzogLSAxXG59O1xubGV0IGFic29sdXRlID0gWydub3J0aCcsICd3ZXN0JywgJ3NvdXRoJywgJ2Vhc3QnXTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICdhYnNvbHV0ZSc6IGFic29sdXRlLFxuICAncmVsYXRpdmUnOiByZWxhdGl2ZSxcbiAgJ2dldEFic29sdXRlRnJvbVR1cm4nOiAoY3VycmVudERpcmVjdGlvbiwgdHVybikgPT4ge1xuICAgIGxldCBkaXIgPSBhYnNvbHV0ZS5pbmRleE9mKGN1cnJlbnREaXJlY3Rpb24pO1xuICAgIGxldCBjbG9jayA9IHtcbiAgICAgICdjbG9jayc6IDEsXG4gICAgICAncmlnaHQnOiAxLFxuICAgICAgJ2NvdW50ZXInOiAtIDEsXG4gICAgICAnbGVmdCc6IC0gMVxuICAgIH07XG5cbiAgICBkaXIgPSAoKGRpciArIGNsb2NrW3R1cm5dKSAlIGFic29sdXRlLmxlbmd0aCArIGFic29sdXRlLmxlbmd0aCkgJSBhYnNvbHV0ZS5sZW5ndGg7XG5cbiAgICByZXR1cm4gYWJzb2x1dGVbZGlyXTtcbiAgfSxcbiAgJ2dldEFic29sdXRlRnJvbVJlbGF0aXZlJzogKGN1cnJlbnREaXJlY3Rpb24sIHJlbCkgPT4ge1xuICAgIGxldCBkaXIgPSBhYnNvbHV0ZS5pbmRleE9mKGN1cnJlbnREaXJlY3Rpb24pO1xuXG4gICAgaWYgKCEgcmVsYXRpdmUuaGFzT3duUHJvcGVydHkocmVsKSkge1xuICAgICAgcmV0dXJuIHJlbDtcbiAgICB9XG5cbiAgICBkaXIgPSAoKGRpciArIHJlbGF0aXZlW3JlbF0pICUgYWJzb2x1dGUubGVuZ3RoICsgYWJzb2x1dGUubGVuZ3RoKSAlIGFic29sdXRlLmxlbmd0aDtcblxuICAgIHJldHVybiBhYnNvbHV0ZVtkaXJdO1xuICB9LFxuICAnZ2V0TmV4dFRpbGVDb29yZGluYXRlcyc6IChjb29yZGluYXRlcywgZGlyZWN0aW9uKSA9PiB7XG4gICAgbGV0IHggPSBjb29yZGluYXRlcy54O1xuICAgIGxldCB5ID0gY29vcmRpbmF0ZXMueTtcbiAgICBsZXQgbW92ZW1lbnQgPSB7XG4gICAgICAnbm9ydGgnOiAoKSA9PiB7XG4gICAgICAgIHkgLT0gMTtcbiAgICAgIH0sXG4gICAgICAnd2VzdCc6ICgpID0+IHtcbiAgICAgICAgeCArPSAxO1xuICAgICAgfSxcbiAgICAgICdzb3V0aCc6ICgpID0+IHtcbiAgICAgICAgeSArPSAxO1xuICAgICAgfSxcbiAgICAgICdlYXN0JzogKCkgPT4ge1xuICAgICAgICB4IC09IDE7XG4gICAgICB9XG4gICAgfTtcblxuICAgIG1vdmVtZW50W2RpcmVjdGlvbl0oKTtcblxuICAgIHJldHVybiB7J3gnOiB4LCAneSc6IHl9O1xuICB9XG59O1xuIiwiLyoqXG4gKiBoZWxwZXJcbiAqL1xubGV0IG1hdGNoQW5jZXN0b3JPZiA9IChjaGlsZCwgcGFyZW50U2VsZWN0b3IsIHN0b3BBdEVsZW1lbnQpID0+IHtcbiAgaWYgKCEgcGFyZW50U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gc3RvcEF0RWxlbWVudDtcbiAgfVxuXG4gIGlmICghIGNoaWxkIHx8IGNoaWxkID09PSBzdG9wQXRFbGVtZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGNoaWxkLm1hdGNoZXMocGFyZW50U2VsZWN0b3IpKSB7XG4gICAgcmV0dXJuIGNoaWxkO1xuICB9XG5cbiAgcmV0dXJuIG1hdGNoQW5jZXN0b3JPZihjaGlsZC5wYXJlbnRFbGVtZW50LCBwYXJlbnRTZWxlY3Rvciwgc3RvcEF0RWxlbWVudCk7XG59O1xuXG4vKipcbiAqIEBjbGFzcyBEb21EZWxlZ2F0ZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIERvbURlbGVnYXRlIHtcbiAgLyoqXG4gICAqIGNvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gcm9vdCAtIHJvb3QgZWxlbWVudCB3aGljaCB3aWxsIGJlIGFjdHVhbGx5IGJvdW5kXG4gICAqL1xuICBjb25zdHJ1Y3RvciAocm9vdCkge1xuICAgIGlmICghIHJvb3QpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBgcm9vdGAgYXJndW1lbnQnKTtcbiAgICB9XG5cbiAgICB0aGlzLnJvb3QgPSByb290O1xuICAgIHRoaXMuZXZlbnRzID0ge307XG4gIH1cblxuICAvL1RoZSBjYWxsYmFjayBoYXMgdGhlIGZvbGxvdyBzaWduYXR1cmU6XG4gIC8vXG4gIC8vYGBgXG4gIC8vZnVuY3Rpb24gY2FsbGJhY2soZG9tTmF0aXZlRXZlbnQsIGV4dHJhRGF0YSlcbiAgLy9cbiAgLy9leHRyYURhdGEgPSB7XG4gIC8vICAnbWF0Y2hlZFRhcmdldCc6IEhUTUxFbGVtZW50IC8vIHRoaXMgaXMgdGhlIGVsZW1lbnQgd2hpY2ggbWF0Y2hlcyBnaXZlbiBzZWxlY3RvclxuICAvL31cbiAgLy9gYGBcbiAgLyoqXG4gICAqIGFkZCBsaXN0ZW5lclxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7Kn0gW2NvbnRleHRdXG4gICAqIEByZXR1cm4ge0RvbURlbGVnYXRlfVxuICAgKi9cbiAgb24gKGV2ZW50LCBzZWxlY3RvciwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb250ZXh0ID0gY2FsbGJhY2s7XG4gICAgICBjYWxsYmFjayA9IHNlbGVjdG9yO1xuICAgICAgc2VsZWN0b3IgPSAnJztcbiAgICB9XG5cbiAgICBpZiAoISBjYWxsYmFjaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGBjYWxsYmFja2AgYXJndW1lbnQnKTtcbiAgICB9XG5cbiAgICBzZWxlY3RvciA9IHNlbGVjdG9yIHx8ICcnO1xuICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IG51bGw7XG5cbiAgICBsZXQgY2FsbGJhY2tzID0gdGhpcy5ldmVudHNbZXZlbnRdO1xuXG4gICAgLy9XZSBhZGQgb25seSBvbmUgbGlzdGVuZXIgcGVyIGV2ZW50IGFuZCB0aGVuIGxvb2sgZm9yIG1hdGNoaW5nIGRlbGVnYXRpb24gbGF0ZXJcbiAgICBpZiAoISBjYWxsYmFja3MpIHtcbiAgICAgIGNhbGxiYWNrcyA9IHRoaXMuZXZlbnRzW2V2ZW50XSA9IFtdO1xuXG4gICAgICBsZXQgZGVsZWdhdGUgPSB0aGlzLmV2ZW50c1tldmVudF0uZGVsZWdhdGlvbkNhbGxiYWNrID0gKGUpID0+IHtcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdXG4gICAgICAgICAgLmZpbHRlcigoc2NvcGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhIHNjb3BlLnNlbGVjdG9yICYmIGUudGFyZ2V0ID09PSB0aGlzLnJvb3QgfHwgbWF0Y2hBbmNlc3Rvck9mKGUudGFyZ2V0LCBzY29wZS5zZWxlY3RvciwgdGhpcy5yb290KTtcbiAgICAgICAgICB9KS5mb3JFYWNoKChzY29wZSkgPT4ge1xuICAgICAgICAgICAgbGV0IG1hdGNoZWRUYXJnZXQgPSBzY29wZS5zZWxlY3RvciA9PT0gJycgJiYgdGhpcy5yb290IHx8IG1hdGNoQW5jZXN0b3JPZihlLnRhcmdldCwgc2NvcGUuc2VsZWN0b3IsIHRoaXMucm9vdCk7XG5cbiAgICAgICAgICAgIGlmIChzY29wZS5jb250ZXh0KSB7XG4gICAgICAgICAgICAgIHJldHVybiBzY29wZS5jYWxsYmFjay5jYWxsKHNjb3BlLmNvbnRleHQsIGUsIHsnbWF0Y2hlZFRhcmdldCc6IG1hdGNoZWRUYXJnZXR9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NvcGUuY2FsbGJhY2soZSwgeydtYXRjaGVkVGFyZ2V0JzogbWF0Y2hlZFRhcmdldH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5yb290LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGRlbGVnYXRlLCB0cnVlKTtcbiAgICB9XG5cbiAgICBjYWxsYmFja3MucHVzaCh7XG4gICAgICAnc2VsZWN0b3InOiBzZWxlY3RvcixcbiAgICAgICdjYWxsYmFjayc6IGNhbGxiYWNrLFxuICAgICAgJ2NvbnRleHQnOiBjb250ZXh0XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiByZW1vdmUgZXZlbnQgbGlzdGVuZXJcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtldmVudF1cbiAgICogQHBhcmFtIHtTdHJpbmd9IFtzZWxlY3Rvcl1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgKiBAcGFyYW0geyp9IFtjb250ZXh0XVxuICAgKiBAcmV0dXJuIHtEb21EZWxlZ2F0ZX1cbiAgICovXG4gIC8qZXNsaW50IGNvbXBsZXhpdHk6IFsyLCAyMF0qL1xuICBvZmYgKGV2ZW50LCBzZWxlY3RvciwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICBsZXQgYXJpdHkgPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29udGV4dCA9IGNhbGxiYWNrO1xuICAgICAgY2FsbGJhY2sgPSBzZWxlY3RvcjtcbiAgICAgIHNlbGVjdG9yID0gJyc7XG4gICAgfVxuXG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJztcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCBudWxsO1xuXG4gICAgaWYgKGFyaXR5ID09PSAwKSB7XG4gICAgICBmb3IgKGV2ZW50IGluIHRoaXMuZXZlbnRzKSB7XG4gICAgICAgIHRoaXMucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmV2ZW50c1tldmVudF0uZGVsZWdhdGlvbkNhbGxiYWNrLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5ldmVudHMgPSB7fTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKCEgdGhpcy5ldmVudHNbZXZlbnRdKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBpZiAoYXJpdHkgPT09IDEpIHtcbiAgICAgIHRoaXMucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmV2ZW50c1tldmVudF0uZGVsZWdhdGlvbkNhbGxiYWNrLCB0cnVlKTtcblxuICAgICAgZGVsZXRlIHRoaXMuZXZlbnRzW2V2ZW50XTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGV0IGRlbGVnYXRpb25DYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50XS5kZWxlZ2F0aW9uQ2FsbGJhY2s7XG5cbiAgICB0aGlzLmV2ZW50c1tldmVudF0gPSB0aGlzLmV2ZW50c1tldmVudF0uZmlsdGVyKChzY29wZSkgPT4ge1xuICAgICAgcmV0dXJuICEgKGFyaXR5ID09PSAyICYmIHNjb3BlLnNlbGVjdG9yID09PSBzZWxlY3RvclxuICAgICAgICB8fCBhcml0eSA9PT0gMyAmJiBzY29wZS5zZWxlY3RvciA9PT0gc2VsZWN0b3IgJiYgc2NvcGUuY2FsbGJhY2sgPT09IGNhbGxiYWNrXG4gICAgICAgIHx8IGFyaXR5ID09PSA0ICYmIHNjb3BlLnNlbGVjdG9yID09PSBzZWxlY3RvciAmJiBzY29wZS5jYWxsYmFjayA9PT0gY2FsbGJhY2sgJiYgc2NvcGUuY29udGV4dCA9PT0gY29udGV4dCk7XG4gICAgfSk7XG4gICAgdGhpcy5ldmVudHNbZXZlbnRdLmRlbGVnYXRpb25DYWxsYmFjayA9IGRlbGVnYXRpb25DYWxsYmFjaztcblxuICAgIGlmICghIHRoaXMuZXZlbnRzW2V2ZW50XS5sZW5ndGgpIHtcbiAgICAgIHRoaXMucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmV2ZW50c1tldmVudF0uZGVsZWdhdGlvbkNhbGxiYWNrLCB0cnVlKTtcblxuICAgICAgZGVsZXRlIHRoaXMuZXZlbnRzW2V2ZW50XTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBkZXN0cnVjdG9yXG4gICAqL1xuICBkZXN0cm95ICgpIHtcbiAgICB0aGlzLm9mZigpO1xuXG4gICAgdGhpcy5yb290ID0gbnVsbDtcbiAgICB0aGlzLmV2ZW50cyA9IG51bGw7XG4gIH1cbn07XG4iLCJsZXQgTWFpblZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL21haW4tdmlldycpO1xubGV0IFVuaXQgPSByZXF1aXJlKCcuL3VuaXQnKTtcbmxldCBwYXJzZSA9IHJlcXVpcmUoJy4vcGFyc2VyJyk7XG5cbmxldCBtYXBzID0gcmVxdWlyZSgnLi9tYXBzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQXBwbGljYXRpb24ge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy52aWV3ID0gbmV3IE1haW5WaWV3KHtcbiAgICAgICdtYXAnOiBtYXBzWzBdXG4gICAgfSk7XG4gICAgdGhpcy5kd2FyZiA9IG5ldyBVbml0KHtcbiAgICAgICd0eXBlJzogJ2R3YXJmJyxcbiAgICAgICduYW1lJzogJ0dpbWxldCcsXG4gICAgICAnbW9kdWxlcyc6IFtcbiAgICAgICAgJ2xlZ3MnLFxuICAgICAgICAnc2Vuc29yJ1xuICAgICAgXSxcbiAgICAgICdtYXAnOiB0aGlzLnZpZXcubWFwXG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZXcub24oJ3Byb2dyYW0ucnVuJywgdGhpcy5vblByb2dyYW1SdW4uYmluZCh0aGlzKSk7XG4gICAgdGhpcy52aWV3Lm9uKCdnYW1lLnZpY3RvcnknLCB0aGlzLm9uVmljdG9yeS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmR3YXJmLm9uKCd1bml0Lm1vdmUnLCB0aGlzLm9uVW5pdE1vdmUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBydW4gKCkge1xuICAgIHRoaXMuZHdhcmYucG9zaXRpb24gPSB7J3gnOiAxLCAneSc6IDJ9O1xuICAgIHRoaXMudmlldy5tYXAuZHJhd1VuaXQodGhpcy5kd2FyZik7XG4gIH1cblxuICBvblByb2dyYW1SdW4gKGUsIGNvZGUpIHtcbiAgICBpZiAodGhpcy5kd2FyZi5wcm9jZXNzb3IucnVubmluZykge1xuICAgICAgdGhpcy5kd2FyZi5wcm9jZXNzb3IucnVubmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy52aWV3LnJ1bkJ1dHRvbi5pbm5lckhUTUwgPSAnUlVOJztcbiAgICAgIHRoaXMudmlldy5ydW5CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZHMtZXhlY3V0aW9uLXN0b3AnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgcHJvZ3JhbSA9IHBhcnNlKGNvZGUpO1xuXG4gICAgaWYgKHByb2dyYW0uc3RhdHVzID09PSAnb2snKSB7XG4gICAgICB0aGlzLmR3YXJmLnJ1bihwcm9ncmFtLnRyZWUpO1xuICAgICAgdGhpcy52aWV3LnJ1bkJ1dHRvbi5pbm5lckhUTUwgPSAnU1RPUCc7XG4gICAgICB0aGlzLnZpZXcucnVuQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RzLWV4ZWN1dGlvbi1zdG9wJyk7XG4gICAgfVxuICAgIHRoaXMudmlldy5yZW5kZXJQYXJzaW5nTG9nKHByb2dyYW0ubG9nKTtcbiAgfVxuXG4gIG9uVmljdG9yeSAoKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tYWxlcnQgKi9cbiAgICB0aGlzLm9uUHJvZ3JhbVJ1bigpO1xuICAgIGFsZXJ0KCdXb3cgY29uZ3JhdHMgeW91IHdvbiAhIScpO1xuICB9XG5cbiAgb25Vbml0TW92ZSAoZSwgdW5pdCwgY29vcmRpbmF0ZXMpIHtcbiAgICB0aGlzLnZpZXcubWFwLm1vdmVVbml0KHVuaXQsIGNvb3JkaW5hdGVzKTtcbiAgfVxufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gW1xuICBgXG5XV1dXV1dXV1dXV1dXV1dcbldfV19fX19fV19fX19XV1xuV19XX1dfV19fX1dXX19XXG5XX19fV19XV1dXV1dXX1dcbldXV1dXX19XV19fX1dfV1xuV19fX1dXX1dfX1dfX19XXG5XX1dfX19fV19XV1dXV1dcbldfV1dXV1dXX19fX19fV1xuV19fV19fX19fV1dXV19XXG5XX1dXV1dXV19fX1dfX1dcbldfV19fX19XV1dXV19XV1xuV19XX1dXX1dfX19XX19XXG5XX1dfV1dXV19XX1dXX1dcbldfX19fV1ZfX1dfX19fV1xuV1dXV1dXV1dXV1dXV1dXXG5gLFxuICBgQUJCQkJCQkJCQkJCQ1xuREVFRUVFRUVFRUVFRlxuR19fX19fX19fX19fSVxuR19fX01OX19fX19fSVxuR19fX09QX19fX19fSVxuR19fX1FSX19fX19fSVxuR19fX1NUX19fX19fSVxuR19fX19fX19fX19fSVxuR19fX19fX19NTl9fSVxuR19fX19fX19JR19fSVxuSktLS0tLS0tWVUtLTGBcbl07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRldGVjdFR5cGUgKGxpbmUpIHtcbiAgbGV0IHBhdHRlcm5zID0ge1xuICAgICdpZic6IC9eaWZcXChbYS16QS16MC05IC4rXFwtKi8hPSdcXChcXCldezAsfVxcKVxceyQvLFxuICAgICdhc3NpZ24nOiAvPS8sXG4gICAgJ2NhbGwnOiAvXFwoW2EtekEtejAtOSwgK1xcLSovPSdcXChcXCldezAsfVxcKSQvLFxuICAgICdjbG9zaW5nQnJhY2tldCc6IC9efSQvLFxuICAgICdzdHJpbmcnOiAvJ1thLXpBLXowLTksICtcXC0qLz0nXFwoXFwpXXswLH0nL1xuICB9O1xuXG4gIGZvciAobGV0IGtleSBpbiBwYXR0ZXJucykge1xuICAgIGlmIChsaW5lLm1hdGNoKHBhdHRlcm5zW2tleV0pKSB7XG4gICAgICByZXR1cm4geyd0eXBlJzoga2V5LCAnc3RhdHVzJzogJ29rJ307XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsndHlwZSc6ICd1bmtub3duJywgJ3N0YXR1cyc6ICdlcnJvcid9O1xufTtcbiIsImxldCBkZXRlY3RUeXBlID0gcmVxdWlyZSgnLi9kZXRlY3QtdHlwZScpO1xuXG5sZXQgYm9vbGVhbk9wZXJhdG9ycyA9IHtcbiAgJz09JzogJ2VxdWFscycsXG4gICchPSc6ICdub3RlcXVhbHMnXG59O1xuXG5sZXQgZXhwcmVzc2lvblBhcnNlciA9IG1vZHVsZS5leHBvcnRzID0ge1xuICAnaWYnOiAobGluZSkgPT4ge1xuICAgIGxldCBpbmZvID0ge307XG4gICAgbGV0IHN0YXJ0ID0gbGluZS5pbmRleE9mKCcoJykgKyAxO1xuICAgIGxldCBlbmQgPSBsaW5lLmxhc3RJbmRleE9mKCcpJyk7XG4gICAgbGV0IGV4cCA9IGxpbmUuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xuICAgIC8vbGV0IGV4cCA9IGxpbmUubWF0Y2goL1xcKFthLXpBLXowLTkgK1xcLSovPSdcXChcXCldezAsfVxcKS9nKVswXTtcblxuICAgIGluZm8uY29uZGl0aW9uID0gZXhwcmVzc2lvblBhcnNlci5ib29sZWFuKGV4cCk7XG4gICAgaW5mby50eXBlID0gJ2lmJztcblxuICAgIHJldHVybiBpbmZvO1xuICB9LFxuICAnY2FsbCc6IChsaW5lKSA9PiB7XG4gICAgbGV0IGluZm8gPSB7fTtcbiAgICBsZXQgc3RhcnQgPSBsaW5lLmluZGV4T2YoJygnKSArIDE7XG4gICAgbGV0IGVuZCA9IGxpbmUubGFzdEluZGV4T2YoJyknKTtcbiAgICBsZXQgcGFyZW4gPSBsaW5lLnN1YnN0cmluZyhzdGFydCwgZW5kKTtcbiAgICAvL2xldCBwYXJlbiA9IGxpbmUubWF0Y2goL1xcKFthLXpBLXowLTksICtcXC0qLz0nXFwoXFwpXXswLH1cXCkvZylbMF07XG4gICAgbGV0IG1ldGhvZE5hbWUgPSBsaW5lLnNwbGl0KCcoJylbMF07XG5cbiAgICBpbmZvLm1ldGhvZCA9IG1ldGhvZE5hbWUuc3BsaXQoJy4nKTtcbiAgICBpbmZvLmFyZ3VtZW50cyA9IFtdO1xuICAgIGluZm8udHlwZSA9ICdjYWxsJztcblxuICAgIGlmIChwYXJlbi5sZW5ndGgpIHtcbiAgICAgIGxldCBhcmdzID0gcGFyZW4uc3BsaXQoJywnKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGFyZ3MubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgaW5mby5hcmd1bWVudHMucHVzaChxdWlja1BhcnNlKGFyZ3NbaV0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5mbztcbiAgfSxcbiAgJ2Fzc2lnbic6IChsaW5lKSA9PiB7XG4gICAgbGV0IGluZm8gPSB7fTtcbiAgICBsZXQgc3BsaXRMaW5lID0gbGluZS5zcGxpdCgnPScpO1xuXG4gICAgaW5mby52YXJpYWJsZSA9IHNwbGl0TGluZVswXTtcbiAgICBpbmZvLnZhbHVlID0gc3BsaXRMaW5lWzFdO1xuICAgIGluZm8udHlwZSA9ICdhc3NpZ24nO1xuXG4gICAgcmV0dXJuIGluZm87XG4gIH0sXG4gICdzdHJpbmcnOiAobGluZSkgPT4ge1xuICAgIGxldCBpbmZvID0ge307XG4gICAgbGV0IHF1b3RlcyA9IGxpbmUubWF0Y2goLydbYS16QS16MC05ICtcXC0qLz0nXFwoXFwpXXswLH0nL2cpWzBdO1xuXG4gICAgaW5mby50eXBlID0gJ3N0cmluZyc7XG4gICAgaW5mby52YWx1ZSA9IHF1b3Rlcy5zdWJzdHJpbmcoMSwgcXVvdGVzLmxlbmd0aCAtIDEpO1xuXG4gICAgcmV0dXJuIGluZm87XG4gIH0sXG4gICdib29sZWFuJzogKGxpbmUpID0+IHtcbiAgICBsZXQgaW5mbyA9IHt9O1xuICAgIGxldCBvcGVyYXRvciA9ICcnO1xuXG4gICAgZm9yIChsZXQga2V5IGluIGJvb2xlYW5PcGVyYXRvcnMpIHtcbiAgICAgIGlmIChsaW5lLm1hdGNoKGtleSkpIHtcbiAgICAgICAgb3BlcmF0b3IgPSBrZXk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGluZSA9IGxpbmUuc3BsaXQob3BlcmF0b3IpO1xuXG4gICAgaW5mby5vcGVyYXRvciA9IGJvb2xlYW5PcGVyYXRvcnNbb3BlcmF0b3JdO1xuICAgIGluZm8uYSA9IHF1aWNrUGFyc2UobGluZVswXSk7XG4gICAgaW5mby5iID0gcXVpY2tQYXJzZShsaW5lWzFdKTtcbiAgICBpbmZvLnR5cGUgPSAnYm9vbGVhbic7XG5cbiAgICByZXR1cm4gaW5mbztcbiAgfVxufTtcblxuZnVuY3Rpb24gcXVpY2tQYXJzZSAoZXhwKSB7XG4gIGxldCB0eXBlID0gZGV0ZWN0VHlwZShleHApO1xuXG4gIGlmICh0eXBlLnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgIHRocm93IG5ldyBFcnJvcihgY291bGRudCBkZXRlcm1pbmUgdHlwZSBvZiAke2V4cH1gKTtcbiAgfVxuXG4gIHJldHVybiBleHByZXNzaW9uUGFyc2VyW3R5cGUudHlwZV0oZXhwKTtcbn1cbiIsImxldCBleHByZXNzaW9uUGFyc2VyID0gcmVxdWlyZSgnLi9leHByZXNzaW9uLXBhcnNlcicpO1xubGV0IGRldGVjdFR5cGUgPSByZXF1aXJlKCcuL2RldGVjdC10eXBlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2UgKGNvZGUpIHtcbiAgbGV0IHByb2dyYW0gPSB7XG4gICAgJ2xvZyc6IFtdLFxuICAgICdzdGF0dXMnOiAnb2snLFxuICAgICd0cmVlJzogW10sXG4gICAgJ3dlaWdodCc6IDBcbiAgfTtcblxuICBsZXQgcmVjdXJzaW9uc0NvdW50ID0gMDtcblxuICAvLyBjb2RlID0gbm9ybWFsaXplQ29kZShjb2RlKTtcblxuICBsZXQgbGluZXMgPSBjb2RlLnNwbGl0KCdcXG4nKTtcblxuICBwcm9ncmFtLnRyZWUgPSBjbGlwICgwLCBsaW5lcy5sZW5ndGgpO1xuXG4gIGZ1bmN0aW9uIGNsaXAgKHN0YXJ0LCBlbmQpIHtcbiAgICByZWN1cnNpb25zQ291bnQgKz0gMTtcblxuICAgIGlmIChyZWN1cnNpb25zQ291bnQgPiAyMDApIHtcbiAgICAgIGxvZ0Vycm9yKHN0YXJ0LCAnUGFyc2VyIGVycm9yOiBUb28gbWFueSByZWN1cnNpb25zJyk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IHRyZWUgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAxKSB7XG4gICAgICBsZXQgbGluZSA9IGxpbmVzW2ldLnJlcGxhY2UoLyAvZywgJycpO1xuXG4gICAgICBpZiAobGluZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxldCBsaW5lVHlwZSA9IGRldGVjdFR5cGUobGluZSk7XG5cbiAgICAgIGlmIChsaW5lVHlwZS5zdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICAgICAgbG9nRXJyb3IoaSwgJ1BhcnNlciBlcnJvcjogQ291bGQgbm90IGRldGVybWluZSBsaW5lIHR5cGUnKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBsaW5lVHlwZSA9IGxpbmVUeXBlLnR5cGU7XG5cbiAgICAgIGlmIChsaW5lVHlwZSA9PT0gJ2Nsb3NpbmdCcmFja2V0Jykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IG9wZXJhdGlvbiA9IHtcbiAgICAgICAgJ3R5cGUnOiBsaW5lVHlwZSxcbiAgICAgICAgJ3Jhdyc6IGxpbmUsXG4gICAgICAgICdzdWJUcmVlJzogW11cbiAgICAgIH07XG4gICAgICBsZXQgbGluZUluZm8gPSBleHByZXNzaW9uUGFyc2VyW2xpbmVUeXBlXShsaW5lKTtcblxuICAgICAgZm9yIChsZXQga2V5IGluIGxpbmVJbmZvKSB7XG4gICAgICAgIG9wZXJhdGlvbltrZXldID0gbGluZUluZm9ba2V5XTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxpbmVUeXBlID09PSAnaWYnKSB7XG4gICAgICAgIGxldCBlbmRpZiA9IGZpbmRDbG9zaW5nQnJhY2tldCAoaSwgZW5kKTtcbiAgICAgICAgbGV0IHJlc3RhcnRBdCA9IGVuZGlmO1xuXG4gICAgICAgIGlmIChlbmRpZiA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgIGxvZ0Vycm9yKGksICdQYXJzZXIgZXJyb3I6IGNvdWxkIG5vdCBmaW5kIG1hdGNoaW5nIGNsb3NpbmcgYnJhY2tldCcpO1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wZXJhdGlvbi5zdWJUcmVlID0gY2xpcChpICsgMSwgZW5kaWYpO1xuXG4gICAgICAgIC8vV2UgY2hlY2sgdGhlIG5leHQgbGluZSBpZiB0aGVyZSBpcyBhIGlmXG4gICAgICAgIGxldCBuZXh0TGluZSA9IGxpbmVzW2VuZGlmICsgMV07XG5cbiAgICAgICAgbmV4dExpbmUgPSBuZXh0TGluZS5yZXBsYWNlKC8gL2csICcnKTtcblxuICAgICAgICBpZiAobmV4dExpbmUubWF0Y2goL15lbHNlXFx7JC8pKSB7XG4gICAgICAgICAgbGV0IGVuZGVsc2UgPSBmaW5kQ2xvc2luZ0JyYWNrZXQgKGVuZGlmICsgMSwgZW5kKTtcblxuICAgICAgICAgIG9wZXJhdGlvbi5lbHNlVHJlZSA9IGNsaXAoZW5kaWYgKyAyLCBlbmRlbHNlKTtcblxuICAgICAgICAgIHJlc3RhcnRBdCA9IGVuZGVsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpID0gcmVzdGFydEF0O1xuICAgICAgfVxuXG4gICAgICB0cmVlLnB1c2gob3BlcmF0aW9uKTtcbiAgICAgIHByb2dyYW0ud2VpZ2h0ICs9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyZWU7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kQ2xvc2luZ0JyYWNrZXQgKHN0YXJ0LCBlbmQpIHtcbiAgICBsZXQgYnJhY2tldENvdW50ZXIgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSArPSAxKSB7XG4gICAgICBsZXQgbGluZSA9IGxpbmVzW2ldO1xuXG4gICAgICBpZiAobGluZS5tYXRjaCgvXFx7LykpIHtcbiAgICAgICAgYnJhY2tldENvdW50ZXIgKz0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChsaW5lLm1hdGNoKC9cXH0vKSkge1xuICAgICAgICBicmFja2V0Q291bnRlciAtPSAxO1xuICAgICAgfVxuICAgICAgaWYgKGJyYWNrZXRDb3VudGVyID09PSAwKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnZXJyb3InO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXJyb3IgKGxpbmUsIG1lc3NhZ2UpIHtcbiAgICBwcm9ncmFtLmxvZy5wdXNoKHtcbiAgICAgICdsaW5lJzogbGluZSxcbiAgICAgICdtZXNzYWdlJzogbWVzc2FnZVxuICAgIH0pO1xuICAgIHByb2dyYW0uc3RhdHVzID0gJ2Vycm9yJztcbiAgfVxuXG4gIHJldHVybiBwcm9ncmFtO1xufTtcblxuLy8gZnVuY3Rpb24gbm9ybWFsaXplQ29kZSAocmF3Q29kZSkge1xuLy8gICBsZXQgbm9ybWFsaXplZENvZGUgPSAnJztcbi8vXG4vLyAgIG5vcm1hbGl6ZWRDb2RlID0gcmF3Q29kZS5yZXBsYWNlKC9cXG5cXHMqfVxccyplbHNlXFxzKntcXHMqXFxuL2csICdcXG59XFxuZWxzZSB7XFxuJyk7XG4vL1xuLy8gICByZXR1cm4gbm9ybWFsaXplZENvZGU7XG4vLyB9XG4iLCJsZXQgZnMgPSByZXF1aXJlKCdmcycpO1xubGV0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5sZXQgdGVtcGxhdGUgPSByZXF1aXJlKCdhay10ZW1wbGF0ZScpO1xubGV0IGRlZmF1bHRzID0gcmVxdWlyZSgnc3RsdWFmZWQnKTtcblxubGV0IFZpZXcgPSByZXF1aXJlKCcuLi92aWV3Jyk7XG5sZXQgUHJvY2Vzc29yID0gcmVxdWlyZSgnLi9wcm9jZXNzb3InKTtcblxubGV0IG1vZHVsZXMgPSByZXF1aXJlKCcuL21vZHVsZXMnKTtcblxuLy8gaHR0cDovL3Nwcml0ZXNwYWNlLmJsb2dzcG90LmZyLzIwMTMvMTAvdG8tc3RhcnQtb2Ytd2l0aC1oZXJlLWFyZS1jb2xsZWN0aW9uLW9mLmh0bWxcbi8vIGh0dHA6Ly9nYW1lLWljb25zLm5ldC9cbi8vIGh0dHA6Ly9vcGVuZ2FtZWFydC5vcmcvc2l0ZXMvZGVmYXVsdC9maWxlcy9kdW5nZW9uX3ByZS5wbmcgKyBodHRwOi8vb3BlbmdhbWVhcnQub3JnL3NpdGVzL2RlZmF1bHQvZmlsZXMvZHVuZ2Vvbl90aWxlc18yLnBuZ1xuLy8gaHR0cDovL29wZW5nYW1lYXJ0Lm9yZy9jb250ZW50L2EtYmxvY2t5LWR1bmdlb25cblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBVbml0IGV4dGVuZHMgVmlldyB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihvcHRpb25zKTtcblxuICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZShmcy5yZWFkRmlsZVN5bmMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL3RlbXBsYXRlcy91bml0LnRwbCcpLCAndXRmLTgnKSk7XG4gICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywge1xuICAgICAgJ2V2ZW50cyc6IFtcbiAgICAgIF0sXG4gICAgICAndHlwZSc6ICdyb2JvdCcsXG4gICAgICAnbmFtZSc6ICdhbm9ueW1vdXMnLFxuICAgICAgJ2RpcmVjdGlvbic6ICd3ZXN0JyxcbiAgICAgICdmdWVsJzogMTAsXG4gICAgICAnbW9kdWxlcyc6IFtcbiAgICAgICAgJ3doZWVscydcbiAgICAgIF1cbiAgICB9KTtcblxuICAgIHRoaXMubWFwID0gb3B0aW9ucy5tYXA7XG4gICAgdGhpcy5wcm9ncmFtQ29udGV4dCA9IHt9O1xuICAgIHRoaXMucHJvY2Vzc29yID0gbmV3IFByb2Nlc3Nvcih7XG4gICAgICAncGFyZW50JzogdGhpc1xuICAgIH0pO1xuXG4gICAgZm9yIChsZXQgbW9kdWxlTmFtZSBvZiB0aGlzLm9wdGlvbnMubW9kdWxlcykge1xuICAgICAgdGhpcy5hZGRNb2R1bGUobW9kdWxlTmFtZSk7XG4gICAgfVxuICB9XG5cbiAgcnVuIChwcm9ncmFtKSB7XG4gICAgdGhpcy5wcm9jZXNzb3IucnVuKHByb2dyYW0pO1xuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICB0aGlzLmVtaXQoJ3JlbmRlcmluZycpO1xuICAgIHRoaXMucmVuZGVyVGVtcGxhdGUodGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLmVtaXQoJ3JlbmRlcicpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhZGRNb2R1bGUgKG1vZHVsZSkge1xuICAgIGlmICghIG1vZHVsZXNbbW9kdWxlXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBtb2R1bGUgXCIke21vZHVsZX1cImApO1xuICAgIH1cblxuICAgIHRoaXNbbW9kdWxlXSA9IG1vZHVsZXNbbW9kdWxlXSh0aGlzKTtcbiAgfVxuXG4gIHVzZUZ1ZWwgKGFtdCA9IDEpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSAncm9ib3QnKSB7XG4gICAgICB0aGlzLmZ1ZWwgLT0gYW10O1xuICAgIH1cbiAgfVxuICBnZXQgZnVlbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5mdWVsO1xuICB9XG5cbiAgc2V0IGRpcmVjdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgfVxuICBnZXQgZGlyZWN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgfVxuICBzZXQgbmFtZSAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGluZyB0byBhc3NpZ24gJHtuYW1lfSB0byBuYW1lIHdoaWNoIGlzIGEgcmVhZCBvbmx5IHByb3BlcnR5YCk7XG4gIH1cbiAgZ2V0IG5hbWUgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMubmFtZTtcbiAgfVxuICBzZXQgdHlwZSAodHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGluZyB0byBhc3NpZ24gJHt0eXBlfSB0byB0eXBlIHdoaWNoIGlzIGEgcmVhZCBvbmx5IHByb3BlcnR5YCk7XG4gIH1cbiAgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudHlwZTtcbiAgfVxufTtcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICAnbGVncyc6IHJlcXVpcmUoJy4vd2hlZWxzJyksXG4gICd3aGVlbHMnOiByZXF1aXJlKCcuL3doZWVscycpLFxuICAnc2Vuc29yJzogcmVxdWlyZSgnLi9zZW5zb3InKVxufTtcbiIsImxldCBkaXJlY3Rpb25zID0gcmVxdWlyZSgnLi4vLi4vZGlyZWN0aW9ucycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNlbnNvciAocGFyZW50KSB7XG4gIC8vbGV0IHNjYW5SYW5nZSA9IDE7XG4gIGxldCBpbmZvID0ge1xuICAgICdnZW5lcmFsJzoge1xuICAgICAgJ3N0YXR1cyc6ICdvaydcbiAgICB9LFxuICAgICdzY2FuJzoge1xuICAgICAgJ2R1cmF0aW9uJzogMjBcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICAnaW5mbyc6IChpbmZvTmFtZSkgPT4ge1xuICAgICAgcmV0dXJuIGluZm9baW5mb05hbWVdO1xuICAgIH0sXG4gICAgJ3NjYW4nOiAoZGlyZWN0aW9uID0gJ2FoZWFkJykgPT4ge1xuICAgICAgbGV0IGFic29sdXRlRGlyZWN0aW9uID0gZGlyZWN0aW9ucy5nZXRBYnNvbHV0ZUZyb21SZWxhdGl2ZShwYXJlbnQuZGlyZWN0aW9uLCBkaXJlY3Rpb24pO1xuICAgICAgbGV0IGxvb2tBdCA9IGRpcmVjdGlvbnMuZ2V0TmV4dFRpbGVDb29yZGluYXRlcyhwYXJlbnQucG9zaXRpb24sIGFic29sdXRlRGlyZWN0aW9uKTtcbiAgICAgIGxldCB0aWxlID0gcGFyZW50Lm1hcC5zZWxlY3RUaWxlKGxvb2tBdCk7XG5cbiAgICAgIGlmICghIHRpbGUgfHwgdGlsZS50eXBlID09PSAnd2FsbCcpIHtcbiAgICAgICAgcmV0dXJuICdvYnN0YWNsZSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAnY2xlYXInO1xuICAgIH1cbiAgfTtcbn07XG4iLCJsZXQgZGlyZWN0aW9ucyA9IHJlcXVpcmUoJy4uLy4uL2RpcmVjdGlvbnMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB3aGVlbHMgKHBhcmVudCkge1xuICBsZXQgaW5mbyA9IHtcbiAgICAnZ2VuZXJhbCc6IHtcbiAgICAgICdzdGF0dXMnOiAnb2snXG4gICAgfSxcbiAgICAndHVybic6IHtcbiAgICAgICdkdXJhdGlvbic6IDE1MFxuICAgIH0sXG4gICAgJ2ZvcndhcmQnOiB7XG4gICAgICAnZHVyYXRpb24nOiAzMDBcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICAnaW5mbyc6IChpbmZvTmFtZSkgPT4ge1xuICAgICAgcmV0dXJuIGluZm9baW5mb05hbWVdO1xuICAgIH0sXG4gICAgJ3R1cm4nOiBmdW5jdGlvbiB0dXJuIChkaXJlY3Rpb24gPSAnY2xvY2snKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gZGlyZWN0aW9ucy5hYnNvbHV0ZS5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBwYXJlbnQuZWwuY2xhc3NMaXN0LnJlbW92ZShgZHMtZGlyZWN0aW9uLSR7ZGlyZWN0aW9ucy5hYnNvbHV0ZVtpXX1gKTtcbiAgICAgIH1cblxuICAgICAgcGFyZW50LmRpcmVjdGlvbiA9IGRpcmVjdGlvbnMuZ2V0QWJzb2x1dGVGcm9tVHVybihwYXJlbnQuZGlyZWN0aW9uLCBkaXJlY3Rpb24pO1xuICAgICAgcGFyZW50LmVsLmNsYXNzTGlzdC5hZGQoYGRzLWRpcmVjdGlvbi0ke3BhcmVudC5kaXJlY3Rpb259YCk7XG5cbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfSxcbiAgICAnZm9yd2FyZCc6IGZ1bmN0aW9uIGZvcndhcmQgKCkge1xuICAgICAgbGV0IG5ld0Nvb3JkaW5hdGVzID0gZGlyZWN0aW9ucy5nZXROZXh0VGlsZUNvb3JkaW5hdGVzKHBhcmVudC5wb3NpdGlvbiwgcGFyZW50LmRpcmVjdGlvbik7XG5cbiAgICAgIGlmIChwYXJlbnQuZnVlbCA8PSAwKSB7XG4gICAgICAgIHBhcmVudC5sb2coYCR7cGFyZW50Lm5hbWV9IHRoZSAke3BhcmVudC50eXBlfSBoYXMgbm8gbW9yZSBmdWVsLmApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHBhcmVudC51c2VGdWVsKCk7XG4gICAgICBwYXJlbnQuZW1pdCgndW5pdC5tb3ZlJywgcGFyZW50LCBuZXdDb29yZGluYXRlcyk7XG4gICAgfVxuICB9O1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUHJvY2Vzc29yIHtcbiAgY29uc3RydWN0b3IgKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG4gICAgdGhpcy5leGVjdXRpb25Mb2cgPSBbXTtcbiAgfVxuXG4gIHJ1biAocHJvZ3JhbSkge1xuICAgIGxldCBpID0gMDtcblxuICAgIGlmICghIHRoaXMucnVubmluZykge1xuICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcblxuICAgICAgdGhpcy5sb2coJ1Byb2dyYW0gc3RhcnRpbmcgZnJvbSB0aGUgdG9wJyk7XG5cbiAgICAgIHRoaXMubmV4dExpbmUocHJvZ3JhbSwgaSwgKCkgPT4ge1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ydW4ocHJvZ3JhbSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBuZXh0TGluZSAocHJvZ3JhbSwgaSwgY2FsbGJhY2spIHtcbiAgICBpZiAoISB0aGlzLnJ1bm5pbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgbGluZSA9IHByb2dyYW1baV07XG4gICAgbGV0IGxpbmVUeXBlID0gbGluZS50eXBlO1xuICAgIGxldCBsYXN0ID0gaSArIDEgPT09IHByb2dyYW0ubGVuZ3RoO1xuXG4gICAgbGV0IG5leHRDb250ZW50ID0gdGhpcy5uZXh0TGluZS5iaW5kKHRoaXMsIHByb2dyYW0sIGkgKyAxLCBjYWxsYmFjayk7XG5cbiAgICBpZiAobGFzdCkge1xuICAgICAgbmV4dENvbnRlbnQgPSBjYWxsYmFjaztcbiAgICB9XG5cbiAgICBsZXQgbmV4dCA9IGZ1bmN0aW9uIG5leHQgKGRlbGF5ID0gMCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiBleGVjICgpIHtcbiAgICAgICAgbmV4dENvbnRlbnQoKTtcbiAgICAgIH0sIGRlbGF5KTtcbiAgICB9O1xuXG4gICAgaWYgKGxpbmVUeXBlID09PSAnYXNzaWduJykge1xuICAgICAgLy90aGlzW3Byb2dyYW1baV1dICYmIHRoaXNbcHJvZ3JhbVtpXV0oKTtcbiAgICAgIG5leHQoKTtcbiAgICB9XG4gICAgaWYgKGxpbmVUeXBlID09PSAnaWYnKSB7XG4gICAgICBpZiAodGhpcy50ZXN0Q29uZGl0aW9uKGxpbmUuY29uZGl0aW9uKSkge1xuICAgICAgICB0aGlzLm5leHRMaW5lKGxpbmUuc3ViVHJlZSwgMCwgbmV4dCk7XG4gICAgICB9IGVsc2UgaWYgKGxpbmUuZWxzZVRyZWUpIHtcbiAgICAgICAgdGhpcy5uZXh0TGluZShsaW5lLmVsc2VUcmVlLCAwLCBuZXh0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxpbmVUeXBlID09PSAnY2FsbCcpIHtcbiAgICAgIGxldCBtZXRob2RJbmZvID0gdGhpcy5leGVjQ2FsbChwcm9ncmFtW2ldKTtcblxuICAgICAgbmV4dChtZXRob2RJbmZvLmluZm8uZHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIGV4ZWNDYWxsIChjYWxsKSB7XG4gICAgbGV0IG1ldGhvZFBhdGggPSBjYWxsLm1ldGhvZDtcbiAgICBsZXQgbWV0aG9kSW5mbyA9IHt9O1xuICAgIGxldCBtZXRob2RDb250ZXh0ID0gJ3Byb2dyYW1Db250ZXh0JztcbiAgICBsZXQgbWV0aG9kTmFtZSA9ICcnO1xuICAgIGxldCBwYXJhbWV0ZXJzID0gW107XG5cbiAgICBpZiAobWV0aG9kUGF0aC5sZW5ndGggPT09IDEpIHtcbiAgICAgIG1ldGhvZE5hbWUgPSBtZXRob2RQYXRoWzBdO1xuICAgIH1cbiAgICBpZiAobWV0aG9kUGF0aC5sZW5ndGggPT09IDIpIHtcbiAgICAgIG1ldGhvZENvbnRleHQgPSBtZXRob2RQYXRoWzBdO1xuICAgICAgbWV0aG9kTmFtZSA9IG1ldGhvZFBhdGhbMV07XG4gICAgfVxuXG4gICAgaWYgKCEgdGhpcy5wYXJlbnRbbWV0aG9kQ29udGV4dF0gfHwgISB0aGlzLnBhcmVudFttZXRob2RDb250ZXh0XVttZXRob2ROYW1lXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXMucGFyZW50Lm5hbWV9IHRoZSAke3RoaXMucGFyZW50LnR5cGV9IGNhbm5vdCBydW4gXCIke21ldGhvZFBhdGguam9pbignLicpfSgke3BhcmFtZXRlcnN9KVwiYCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGNhbGwuYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICBwYXJhbWV0ZXJzLnB1c2godGhpcy5nZXRBcmd1bWVudFZhbHVlKGNhbGwuYXJndW1lbnRzW2ldKSk7XG4gICAgfVxuXG4gICAgLy9nZXQgaW5mbyBmcm9tIG1vZHVsZVxuICAgIG1ldGhvZEluZm8gPSB0aGlzLnBhcmVudFttZXRob2RDb250ZXh0XS5pbmZvICYmIHRoaXMucGFyZW50W21ldGhvZENvbnRleHRdLmluZm8obWV0aG9kTmFtZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgJ3JldHVybic6IHRoaXMucGFyZW50W21ldGhvZENvbnRleHRdW21ldGhvZE5hbWVdLmFwcGx5KHRoaXMucGFyZW50LCBwYXJhbWV0ZXJzKSxcbiAgICAgICdpbmZvJzogbWV0aG9kSW5mb1xuICAgIH07XG4gIH1cblxuICB0ZXN0Q29uZGl0aW9uIChjb25kaXRpb24pIHtcbiAgICBpZiAoY29uZGl0aW9uLm9wZXJhdG9yID09PSAnZXF1YWxzJykge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0QXJndW1lbnRWYWx1ZShjb25kaXRpb24uYSkgPT09IHRoaXMuZ2V0QXJndW1lbnRWYWx1ZShjb25kaXRpb24uYik7XG4gICAgfVxuICAgIGlmIChjb25kaXRpb24ub3BlcmF0b3IgPT09ICdub3RlcXVhbHMnKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRBcmd1bWVudFZhbHVlKGNvbmRpdGlvbi5hKSAhPT0gdGhpcy5nZXRBcmd1bWVudFZhbHVlKGNvbmRpdGlvbi5iKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ2V0QXJndW1lbnRWYWx1ZSAoYXJnKSB7XG4gICAgaWYgKGFyZy50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIGFyZy52YWx1ZTtcbiAgICB9XG4gICAgaWYgKGFyZy50eXBlID09PSAnY2FsbCcpIHtcbiAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZXhlY0NhbGwoYXJnKTtcblxuICAgICAgcmV0dXJuIHZhbHVlLnJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBsb2cgKHRleHQpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gICAgY29uc29sZS5sb2codGV4dCk7XG4gICAgdGhpcy5leGVjdXRpb25Mb2cucHVzaCh0ZXh0KTtcbiAgfVxufTtcbiIsImxldCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdhay1ldmVudGVtaXR0ZXInKTtcbmxldCBEb21EZWxlZ2F0ZSA9IHJlcXVpcmUoJy4vZG9tLWRlbGVnYXRlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgVmlldyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihvcHRpb25zKTtcblxuICAgIHRoaXMuZXZlbnRzID0ge307XG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIHZpZXcncyBtYWluIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqL1xuICBnZXQgZWwgKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogYmluZCBldmVudHMgdG8gdGhlIHZpZXcncyBtYWluIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEB0aHJvd3MgRXJyb3IgLSBpZiB2aWV3IGhhcyBub3QgYmVlbiByZW5kZXJlZFxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PFZpZXdFdmVudD59IFtldmVudHNdXG4gICAqIEByZXR1cm4ge1ZpZXd9XG4gICAqL1xuICBiaW5kIChldmVudHMgPSB0aGlzLm9wdGlvbnMuZXZlbnRzKSB7XG4gICAgaWYgKCEgdGhpcy5lbGVtZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZpZXcgaGFzIG5vdCBiZWVuIHJlbmRlcmVkIHlldC4nKTtcbiAgICB9XG5cbiAgICBpZiAoISBldmVudHMpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vV2lsbCB0cnkgdG8gdW5iaW5kIGV2ZW50cyBmaXJzdCwgdG8gYXZvaWQgZHVwbGljYXRlc1xuICAgIHRoaXMudW5iaW5kKGV2ZW50cyk7XG4gICAgdGhpcy5oYW5kbGVFdmVudHMoJ29uJywgZXZlbnRzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIHVuYmluZCBldmVudHMgZnJvbSB0aGUgdmlldydzIG1haW4gRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHRocm93cyBFcnJvciAtIGlmIHZpZXcgaGFzIG5vdCBiZWVuIHJlbmRlcmVkXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk8Vmlld0V2ZW50Pn0gW2V2ZW50c11cbiAgICogQHJldHVybiB7Vmlld31cbiAgICovXG4gIHVuYmluZCAoZXZlbnRzID0gdGhpcy5vcHRpb25zLmV2ZW50cykge1xuICAgIGlmICghIHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdWaWV3IGhhcyBub3QgYmVlbiByZW5kZXJlZCB5ZXQuJyk7XG4gICAgfVxuXG4gICAgaWYgKCEgZXZlbnRzKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLm9mZigpO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0aGlzLmhhbmRsZUV2ZW50cygnb2ZmJywgZXZlbnRzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlbXBsYXRlIHJlbmRlcmluZ1xuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IGRhdGEgLSBkYXRhIHRvIGRpc3BsYXlcbiAgICogQHJldHVybiB7V2lkZ2V0Vmlld31cbiAgICovXG4gIHJlbmRlclRlbXBsYXRlIChkYXRhKSB7XG4gICAgLy9XaWxsIGFsd2F5cyB1bmJpbmQgYmVmb3JlIHJlbmRlcmluZyBpZiBtYWluIGVsZW1lbnQgaXMgYWxyZWFkeSBzZXQuXG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgIHRoaXMuZGVsZWdhdGUuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGlmICghIHRoaXMudGVtcGxhdGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBgdGhpcy50ZW1wbGF0ZWAnKTtcbiAgICB9XG5cbiAgICAvL09ubHkgdGFrZXMgdGhlIGZpcnN0IGNoaWxkIGVsZW1lbnQgb2YgdGhlIHRlbXBsYXRlLlxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuZG9taWZ5KHRoaXMudGVtcGxhdGUoZGF0YSB8fCB7fSkpO1xuICAgIHRoaXMuZGVsZWdhdGUgPSBuZXcgRG9tRGVsZWdhdGUodGhpcy5lbGVtZW50KTtcblxuICAgIHRoaXMuYmluZCgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogcmVuZGVyIHRoZSB0ZW1wbGF0ZSAocHJveHkgZm9yIGAjcmVuZGVyVGVtcGxhdGUoKWApXG4gICAqXG4gICAqIEBzZWUgI3JlbmRlclRlbXBsYXRlKClcbiAgICogQGV2ZW50IHJlbmRlcmluZyAtIGJlZm9yZSByZW5kZXJpbmdcbiAgICogQGV2ZW50IHJlbmRlciAtIGFmdGVyIHJlbmRlclxuICAgKlxuICAgKiBAcmV0dXJuIHtWaWV3fVxuICAgKi9cbiAgcmVuZGVyICgpIHtcbiAgICB0aGlzLmVtaXQoJ3JlbmRlcmluZycpO1xuICAgIHRoaXMucmVuZGVyVGVtcGxhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLmVtaXQoJ3JlbmRlcicpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBkb21pZnkgKHN0cikge1xuICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGRpdi5pbm5lckhUTUwgPSBzdHI7XG5cbiAgICByZXR1cm4gZGl2LmZpcnN0RWxlbWVudENoaWxkO1xuICB9XG5cbiAgaGFuZGxlRXZlbnRzIChhY3Rpb24sIGV2ZW50cykge1xuICAgIGxldCBldmVudDtcbiAgICBsZXQgc2VsZWN0b3I7XG4gICAgbGV0IGNhbGxiYWNrO1xuICAgIGxldCBjb250ZXh0O1xuICAgIGxldCBzY29wZTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBldmVudHMubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIHNjb3BlID0gZXZlbnRzW2ldO1xuICAgICAgZXZlbnQgPSBzY29wZVswXTtcbiAgICAgIHNlbGVjdG9yID0gc2NvcGVbMl0gPyBzY29wZVsxXSA6IG51bGw7XG4gICAgICBjYWxsYmFjayA9IHNjb3BlWzJdID8gc2NvcGVbMl0gOiBzY29wZVsxXTtcbiAgICAgIGNvbnRleHQgPSBudWxsO1xuXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB0aGlzW2NhbGxiYWNrXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjayA9IHRoaXNbY2FsbGJhY2tdO1xuICAgICAgICAvKmVzbGludCBjb25zaXN0ZW50LXRoaXM6IDAqL1xuICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY2FsbGJhY2sgZm9yIGV2ZW50IFsnICsgZXZlbnQgKyAnLCAnICsgc2VsZWN0b3IgKyAnLCAnICsgY2FsbGJhY2spO1xuICAgICAgfVxuXG4gICAgICBpZiAoISBzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmRlbGVnYXRlW2FjdGlvbl0oZXZlbnQsICcnLCBjYWxsYmFjaywgY29udGV4dCk7XG5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHNlbGVjdG9yID0gQXJyYXkuaXNBcnJheShzZWxlY3RvcikgPyBzZWxlY3RvciA6IFtzZWxlY3Rvcl07XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2VsZWN0b3IubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZVthY3Rpb25dKGV2ZW50LCBzZWxlY3RvcltqXSwgY2FsbGJhY2ssIGNvbnRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbiIsImxldCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5sZXQgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmxldCB0ZW1wbGF0ZSA9IHJlcXVpcmUoJ2FrLXRlbXBsYXRlJyk7XG5sZXQgZGVmYXVsdHMgPSByZXF1aXJlKCdzdGx1YWZlZCcpO1xuXG5sZXQgVmlldyA9IHJlcXVpcmUoJy4uL3ZpZXcnKTtcbmxldCBNYXAgPSByZXF1aXJlKCcuL21hcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIE1haW5WaWV3IGV4dGVuZHMgVmlldyB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihvcHRpb25zKTtcblxuICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZShmcy5yZWFkRmlsZVN5bmMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL3RlbXBsYXRlcy9tYWluLXZpZXcudHBsJyksICd1dGYtOCcpKTtcbiAgICB0aGlzLmxpbmVOdW1iZXJUZW1wbGF0ZSA9IHRlbXBsYXRlKGZzLnJlYWRGaWxlU3luYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vdGVtcGxhdGVzL2xpbmUtbnVtYmVyLnRwbCcpLCAndXRmLTgnKSk7XG4gICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywge1xuICAgICAgJ2V2ZW50cyc6IFtcbiAgICAgICAgWydjbGljaycsICcuZHMtcnVuJywgJ29uUnVuQ2xpY2snXSxcbiAgICAgICAgWydrZXlwcmVzcycsICcjZHMtZWRpdG9yLWlucHV0JywgJ29uRW50ZXInXVxuICAgICAgXVxuICAgIH0pO1xuXG4gICAgdGhpcy5tYXAgPSBuZXcgTWFwKHtcbiAgICAgICdtYXAnOiB0aGlzLm9wdGlvbnMubWFwXG4gICAgfSk7XG5cbiAgICB0aGlzLm1hcC5vbignbWFwLndhbGsudmljdG9yeScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnZ2FtZS52aWN0b3J5Jyk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHRoaXMuZW1pdCgncmVuZGVyaW5nJyk7XG4gICAgdGhpcy5yZW5kZXJUZW1wbGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgbGV0IG1hcFBhbmVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcjZHMtbWFwLXBhbmVsJyk7XG5cbiAgICBtYXBQYW5lbC5hcHBlbmRDaGlsZCh0aGlzLm1hcC5yZW5kZXIoKS5lbCk7XG5cbiAgICB0aGlzLnJ1bkJ1dHRvbiA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmRzLXJ1bicpO1xuICAgIHRoaXMuZWRpdG9yID0ge1xuICAgICAgJ251bWJlcnMnOiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJyNkcy1lZGl0b3ItbGluZS1udW1iZXJzJyksXG4gICAgICAnaW5wdXQnOiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJyNkcy1lZGl0b3ItaW5wdXQnKVxuICAgIH07XG5cbiAgICB0aGlzLmVkaXRvci5pbnB1dC52YWx1ZSA9IGBpZiAoc2Vuc29yLnNjYW4oJ3JpZ2h0JykgPT0gJ2NsZWFyJykge1xuIGxlZ3MudHVybigncmlnaHQnKVxufVxuaWYgKHNlbnNvci5zY2FuKCdhaGVhZCcpID09ICdjbGVhcicpIHtcbiBsZWdzLmZvcndhcmQoKVxufVxuZWxzZSB7XG4gaWYoc2Vuc29yLnNjYW4oJ2xlZnQnKSA9PSAnY2xlYXInKSB7XG4gIGxlZ3MudHVybignbGVmdCcpXG4gfVxuIGVsc2Uge1xuICBsZWdzLnR1cm4oJ3JpZ2h0JylcbiB9XG59XG5gO1xuXG4gICAgdGhpcy5vbkVudGVyKCk7XG5cbiAgICB0aGlzLmVtaXQoJ3JlbmRlcicpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZW5kZXJQYXJzaW5nTG9nIChsb2cpIHtcbiAgICBsZXQgbGluZU51bWJlcnMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcy1lZGl0b3ItbGluZS1udW1iZXInKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBsaW5lTnVtYmVycy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgbGluZU51bWJlcnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZHMtcGFyc2luZy1lcnJvcicpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBsb2cubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIGxldCBkaXNwbGF5ZWROdW1iZXIgPSBsb2dbaV0ubGluZSArIDE7XG4gICAgICBsZXQgbGluZU51bWJlciA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihgLmRzLWVkaXRvci1saW5lLW51bWJlcltkYXRhLWxpbmUtbnVtYmVyPVwiJHtkaXNwbGF5ZWROdW1iZXJ9XCJdYCk7XG5cbiAgICAgIGlmICghIGxpbmVOdW1iZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsaW5lTnVtYmVyLmNsYXNzTGlzdC5hZGQoJ2RzLXBhcnNpbmctZXJyb3InKTtcbiAgICAgIGxpbmVOdW1iZXIudGl0bGUgPSBsb2dbaV0ubWVzc2FnZTtcbiAgICB9XG4gIH1cblxuICBvblJ1bkNsaWNrICgpIHtcbiAgICBsZXQgcmF3Q29kZSA9IHRoaXMuZWRpdG9yLmlucHV0LnZhbHVlO1xuXG4gICAgdGhpcy5lbWl0KCdwcm9ncmFtLnJ1bicsIHJhd0NvZGUpO1xuICB9XG5cbiAgb25FbnRlciAoKSB7XG4gICAgbGV0IGxpbmVDb3VudCA9IHRoaXMuZWRpdG9yLmlucHV0LnZhbHVlLnNwbGl0KCdcXG4nKS5sZW5ndGg7XG4gICAgbGV0IGxpbmVOdW1iZXJzSHRtbCA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbGluZUNvdW50ICsgMTsgaSArPSAxKSB7XG4gICAgICBsaW5lTnVtYmVyc0h0bWwgKz0gdGhpcy5saW5lTnVtYmVyVGVtcGxhdGUoeydudW1iZXInOiBpfSk7XG4gICAgfVxuXG4gICAgdGhpcy5lZGl0b3IuaW5wdXQucm93cyA9IGxpbmVDb3VudCArIDM7XG4gICAgdGhpcy5lZGl0b3IubnVtYmVycy5pbm5lckhUTUwgPSBsaW5lTnVtYmVyc0h0bWw7XG4gIH1cbn07XG4iLCJsZXQgZnMgPSByZXF1aXJlKCdmcycpO1xubGV0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5sZXQgdGVtcGxhdGUgPSByZXF1aXJlKCdhay10ZW1wbGF0ZScpO1xubGV0IGRlZmF1bHRzID0gcmVxdWlyZSgnc3RsdWFmZWQnKTtcblxubGV0IFZpZXcgPSByZXF1aXJlKCcuLi92aWV3Jyk7XG5cbmxldCBtYXBzID0gcmVxdWlyZSgnLi4vbWFwcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIE1hcCBleHRlbmRzIFZpZXcge1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIob3B0aW9ucyk7XG5cbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGUoZnMucmVhZEZpbGVTeW5jKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi90ZW1wbGF0ZXMvbWFwLnRwbCcpLCAndXRmLTgnKSk7XG4gICAgdGhpcy5tYXBUaWxlVGVtcGxhdGUgPSB0ZW1wbGF0ZShmcy5yZWFkRmlsZVN5bmMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL3RlbXBsYXRlcy9tYXAtdGlsZS50cGwnKSwgJ3V0Zi04JykpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywge1xuICAgICAgJ2V2ZW50cyc6IFtdLFxuICAgICAgJ21hcCc6IG1hcHNbMF1cbiAgICB9KTtcblxuICAgIHRoaXMubWFwID0gdGhpcy5pbml0TWFwKG9wdGlvbnMubWFwKTtcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgdGhpcy5lbWl0KCdyZW5kZXJpbmcnKTtcbiAgICB0aGlzLnJlbmRlclRlbXBsYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICBsZXQgbWFwSHRtbCA9ICcnO1xuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLm1hcC5sZW5ndGg7IHkgKz0gMSkge1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLm1hcFt5XS5sZW5ndGg7IHggKz0gMSkge1xuICAgICAgICBtYXBIdG1sICs9IHRoaXMubWFwVGlsZVRlbXBsYXRlKHRoaXMubWFwW3ldW3hdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmVsLmlubmVySFRNTCA9IG1hcEh0bWw7XG4gICAgdGhpcy5zYXZlVGlsZUVsZW1lbnRzKCk7XG5cbiAgICB0aGlzLmVtaXQoJ3JlbmRlcicpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBpbml0TWFwIChwbGFuKSB7XG4gICAgbGV0IG1hcCA9IFtdO1xuXG4gICAgcGxhbiA9IHBsYW4uc3BsaXQoJ1xcbicpO1xuXG4gICAgZm9yIChsZXQgeSA9IDAsIHlsZW4gPSBwbGFuLmxlbmd0aDsgeSA8IHlsZW47IHkgKz0gMSkge1xuICAgICAgbGV0IHJvdyA9IHBsYW5beV0uc3BsaXQoJycpO1xuXG4gICAgICBtYXAucHVzaChbXSk7XG5cbiAgICAgIGZvciAobGV0IHggPSAwLCB4bGVuID0gcm93Lmxlbmd0aDsgeCA8IHhsZW47IHggKz0gMSkge1xuICAgICAgICBsZXQgdGlsZSA9IHtcbiAgICAgICAgICAneCc6IHgsXG4gICAgICAgICAgJ3knOiB5LFxuICAgICAgICAgICd0eXBlJzogJ2Zsb29yJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChwbGFuW3ldW3hdID09PSAnVycpIHtcbiAgICAgICAgICB0aWxlLnR5cGUgPSAnd2FsbCc7XG4gICAgICAgICAgdGlsZS5pbWdDbGFzcyA9IHBsYW5beV1beF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBsYW5beV1beF0gPT09ICdWJykge1xuICAgICAgICAgIHRpbGUudHlwZSA9ICd2aWN0b3J5JztcbiAgICAgICAgICB0aWxlLmltZ0NsYXNzID0gJ3ZpY3RvcnknO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFwW3ldLnB1c2godGlsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcDtcbiAgfVxuICBzYXZlVGlsZUVsZW1lbnRzICgpIHtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMubWFwLmxlbmd0aDsgeSArPSAxKSB7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMubWFwW3ldLmxlbmd0aDsgeCArPSAxKSB7XG4gICAgICAgIGxldCBzZWxlY3RvciA9IGAuZHMtbWFwLXRpbGVbZGF0YS1wb3NpdGlvbi14PVwiJHt4fVwiXVtkYXRhLXBvc2l0aW9uLXk9XCIke3l9XCJdYDtcblxuICAgICAgICB0aGlzLm1hcFt5XVt4XS5lbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHNlbGVjdFRpbGUgKGNvb3JkaW5hdGVzKSB7XG4gICAgaWYgKCEgY29vcmRpbmF0ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcHJvdmlkZWQgZm9yIHNlbGVjdFRpbGUnKTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG5cbiAgICByZXN1bHQgPSB0aGlzLm1hcFtjb29yZGluYXRlcy55XSAmJiB0aGlzLm1hcFtjb29yZGluYXRlcy55XVtjb29yZGluYXRlcy54XTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZHJhd1VuaXQgKHVuaXQpIHtcbiAgICBsZXQgdGlsZSA9IHRoaXMuc2VsZWN0VGlsZSh1bml0LnBvc2l0aW9uKTtcblxuICAgIGlmICh1bml0LmVsKSB7XG4gICAgICB1bml0LmVsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodW5pdC5lbCk7XG4gICAgfVxuICAgIGlmICghIHVuaXQuZWwpIHtcbiAgICAgIHVuaXQucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgdGlsZS5lbC5hcHBlbmRDaGlsZCh1bml0LmVsKTtcbiAgfVxuXG4gIG1vdmVVbml0ICh1bml0LCBjb29yZGluYXRlcykge1xuICAgIGxldCB0aWxlID0gdGhpcy5zZWxlY3RUaWxlKGNvb3JkaW5hdGVzKTtcblxuICAgIGlmICh0aWxlICYmIHRpbGUudHlwZSAhPT0gJ3dhbGwnKSB7XG4gICAgICB1bml0LnBvc2l0aW9uID0gY29vcmRpbmF0ZXM7XG4gICAgICB0aGlzLmRyYXdVbml0KHVuaXQpO1xuXG4gICAgICBpZiAodGlsZS50eXBlID09PSAndmljdG9yeScpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdtYXAud2Fsay52aWN0b3J5Jyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHVuaXQucHJvY2Vzc29yLmxvZygnbW92ZSBkaXNhbGxvd2VkJyk7XG4gIH1cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2V2ZW50ZW1pdHRlcicpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEV4cG9ydCBgRXZlbnRFbWl0dGVyYFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqIEByZXR1cm4ge0V2ZW50RW1pdHRlcn1cbiAqL1xudmFyIEV2ZW50RW1pdHRlciA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHRoaXMuX2V2ZW50RW1pdHRlciA9IHt9O1xuICB0aGlzLl9ldmVudEVtaXR0ZXIudHJlZSA9IHsnY2hpbGRyZW4nOiB7fX07XG4gIHRoaXMuX2V2ZW50RW1pdHRlci5kZWxpbWl0ZXIgPSBvcHRpb25zLmRlbGltaXRlciB8fCAnLic7XG59O1xuXG4vKipcbiAqIENhbGwgYWxsIGNhbGxiYWNrcyBmb3IgZ2l2ZW4gdHJlZVxuICpcbiAqIEBzZWUgI19zZWFyY2hUcmVlKCk7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRyZWVcbiAqIEBwYXJhbSB7YXJndW1lbnRzfSBhcmdzXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2VtaXQgPSBmdW5jdGlvbiAodHJlZSwgYXJncykge1xuICB2YXIgY2FsbGJhY2tzID0gdHJlZS5jYWxsYmFja3M7XG5cbiAgaWYgKCEgY2FsbGJhY2tzKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB2YXIgYXJnYyA9IGFyZ3MubGVuZ3RoO1xuXG4gIGZvciAoXG4gICAgdmFyIGkgPSAwLFxuICAgIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGgsXG4gICAgY2FsbGJhY2s7XG4gICAgaSA8IGxlbjtcbiAgICBpICs9IDFcbiAgKSB7XG4gICAgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV07XG5cbiAgICBpZiAoYXJnYyA9PT0gMSkge1xuICAgICAgY2FsbGJhY2suZm4uY2FsbChjYWxsYmFjay5jb250ZXh0LCBhcmdzWzBdKTtcbiAgICB9IGVsc2UgaWYgKGFyZ2MgPT09IDIpIHtcbiAgICAgIGNhbGxiYWNrLmZuLmNhbGwoY2FsbGJhY2suY29udGV4dCwgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrLmZuLmFwcGx5KGNhbGxiYWNrLmNvbnRleHQsIGFyZ3MpO1xuICAgIH1cblxuICAgIGlmIChjYWxsYmFjay5vbmNlKSB7XG4gICAgICBjYWxsYmFja3Muc3BsaWNlKGksIDEpO1xuXG4gICAgICBpIC09IDE7XG4gICAgICBsZW4gLT0gMTtcblxuICAgICAgaWYgKGNhbGxiYWNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdHJlZS5jYWxsYmFja3MgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFBhcnNlIGdpdmVuIHRyZWUgZm9yIGdpdmVuIG5zXG4gKlxuICogQHNlZSAjZW1pdCgpO1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0cmVlXG4gKiBAcGFyYW0ge0FycmF5fSBuc1xuICogQHBhcmFtIHtJbnRlZ2VyfSBzdGFydFxuICogQHBhcmFtIHthcmd1bWVudHN9IGFyZ3NcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fc2VhcmNoVHJlZSA9IGZ1bmN0aW9uICh0cmVlLCBucywgc3RhcnQsIGFyZ3MpIHtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0LFxuICAgIGxlbiA9IG5zLmxlbmd0aCxcbiAgICBjdXJyZW50TnMsXG4gICAgY3VycmVudFRyZWUsXG4gICAgd2lsZFRyZWU7XG4gICAgaSA8IGxlbjtcbiAgICBpICs9IDFcbiAgKSB7XG4gICAgd2lsZFRyZWUgPSB0cmVlLmNoaWxkcmVuWycqJ107XG5cbiAgICBpZiAod2lsZFRyZWUpIHtcbiAgICAgIGlmICh3aWxkVHJlZS5jYWxsYmFja3MpIHtcbiAgICAgICAgdGhpcy5fZW1pdCh3aWxkVHJlZSwgYXJncyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3NlYXJjaFRyZWUod2lsZFRyZWUsIG5zLCBpICsgMSwgYXJncyk7XG4gICAgfVxuXG4gICAgY3VycmVudE5zID0gbnNbaV07XG4gICAgY3VycmVudFRyZWUgPSB0cmVlLmNoaWxkcmVuW2N1cnJlbnROc107XG5cbiAgICBpZiAoISBjdXJyZW50VHJlZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdHJlZSA9IGN1cnJlbnRUcmVlO1xuICB9XG5cbiAgaWYgKGN1cnJlbnRUcmVlKSB7XG4gICAgdGhpcy5fZW1pdChjdXJyZW50VHJlZSwgYXJncyk7XG4gIH1cbn07XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5zXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICogQHJldHVybiB7RXZlbnRFbWl0dGVyfVxuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKG5zLCBjYWxsYmFjaywgY29udGV4dCwgb25jZSkge1xuICBucyA9IG5zLnNwbGl0KHRoaXMuX2V2ZW50RW1pdHRlci5kZWxpbWl0ZXIpO1xuICB2YXIgdHJlZSA9IHRoaXMuX2V2ZW50RW1pdHRlci50cmVlO1xuICB2YXIgY3VycmVudE5zO1xuICB2YXIgY3VycmVudFRyZWU7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5zLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgY3VycmVudE5zID0gbnNbaV07XG4gICAgY3VycmVudFRyZWUgPSB0cmVlLmNoaWxkcmVuW2N1cnJlbnROc107XG5cbiAgICBpZiAoISBjdXJyZW50VHJlZSkge1xuICAgICAgY3VycmVudFRyZWUgPSB0cmVlLmNoaWxkcmVuW2N1cnJlbnROc10gPSB7J2NoaWxkcmVuJzoge319O1xuICAgIH1cblxuICAgIHRyZWUgPSBjdXJyZW50VHJlZTtcbiAgfVxuXG4gIGlmICghIHRyZWUuY2FsbGJhY2tzKSB7XG4gICAgdHJlZS5jYWxsYmFja3MgPSBbXTtcbiAgfVxuXG4gIHRyZWUuY2FsbGJhY2tzLnB1c2goe1xuICAgICdmbic6IGNhbGxiYWNrLFxuICAgICdjb250ZXh0JzogY29udGV4dCA/IGNvbnRleHQgOiB0aGlzLFxuICAgICdvbmNlJzogISEgb25jZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5zXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICogQHJldHVybiB7RXZlbnRFbWl0dGVyfVxuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChucywgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgaWYgKCEgbnMpIHtcbiAgICB0aGlzLl9ldmVudEVtaXR0ZXIudHJlZSA9IHsnY2hpbGRyZW4nOiB7fX07XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIG5zID0gbnMuc3BsaXQodGhpcy5fZXZlbnRFbWl0dGVyLmRlbGltaXRlcik7XG4gIHZhciB0cmVlID0gdGhpcy5fZXZlbnRFbWl0dGVyLnRyZWU7XG4gIHZhciBjdXJyZW50VHJlZTtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gbnMubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICBjdXJyZW50VHJlZSA9IHRyZWUuY2hpbGRyZW5bbnNbaV1dO1xuXG4gICAgaWYgKCEgY3VycmVudFRyZWUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRyZWUgPSBjdXJyZW50VHJlZTtcbiAgfVxuXG4gIGlmICghIGNhbGxiYWNrKSB7XG4gICAgdHJlZS5jYWxsYmFja3MgPSB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGlmICghIHRyZWUuY2FsbGJhY2tzKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBmb3IgKFxuICAgIHZhciBpMiA9IDAsXG4gICAgY2FsbGJhY2tzID0gdHJlZS5jYWxsYmFja3MsXG4gICAgbGVuMiA9IGNhbGxiYWNrcy5sZW5ndGgsXG4gICAgY3VycmVudENhbGxiYWNrO1xuICAgIGkyIDwgbGVuMjtcbiAgICBpMiArPSAxXG4gICkge1xuICAgIGN1cnJlbnRDYWxsYmFjayA9IGNhbGxiYWNrc1tpMl07XG5cbiAgICBpZiAoY3VycmVudENhbGxiYWNrLmZuID09PSBjYWxsYmFjaykge1xuICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dCAhPT0gY3VycmVudENhbGxiYWNrLmNvbnRleHQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaTIsIDEpO1xuXG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoISBjYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgdHJlZS5jYWxsYmFja3MgPSB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRW1pdCBldmVudFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuc1xuICogQHBhcmFtIHsqfSAuLi4gKG9wdGlvbmFsKVxuICogQHJldHVybiB7RXZlbnRFbWl0dGVyfVxuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAobnMpIHtcbiAgbnMgPSBucy5zcGxpdCh0aGlzLl9ldmVudEVtaXR0ZXIuZGVsaW1pdGVyKTtcblxuICB0aGlzLl9zZWFyY2hUcmVlKHRoaXMuX2V2ZW50RW1pdHRlci50cmVlLCBucywgMCwgYXJndW1lbnRzKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyIGZvciBvbmNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5zXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICogQHJldHVybiB7RXZlbnRFbWl0dGVyfVxuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAobnMsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gIHRoaXMub24obnMsIGNhbGxiYWNrLCBjb250ZXh0LCB0cnVlKTtcblxuICByZXR1cm4gdGhpcztcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL3RlbXBsYXRlJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGVwZW5kZW5jaWVzXG4gKi9cbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJ3N0bHVhZmVkJyk7XG5cbi8qKlxuICogRXhwb3J0IGB0ZW1wbGF0ZWBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xudmFyIHRlbXBsYXRlID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciB0cGwgPSB0ZW1wbGF0ZS5jYWNoZVtzdHJdO1xuXG4gIGlmICh0cGwpIHtcbiAgICByZXR1cm4gdHBsO1xuICB9XG5cbiAgLypqc2hpbnQgZXZpbDogdHJ1ZSovXG4gIHRwbCA9IChuZXcgRnVuY3Rpb24oXG4gICAgJ2xvY2FscycsXG4gICAgJ2xvY2FscyA9IHRoaXMuZGVmYXVsdHMobG9jYWxzIHx8IHt9LCB0aGlzLmdsb2JhbHMpOycgK1xuICAgICd2YXIgX19wID0gW107JyArXG4gICAgJ19fcC5wdXNoKFxcJycgK1xuICAgIHN0ci5yZXBsYWNlKC9bXFxyXFx0XFxuXS9nLCAnICcpXG4gICAgICAucmVwbGFjZSgvJyg/PVteJV0qJT4pL2csICdcXHQnKVxuICAgICAgLnNwbGl0KCdcXCcnKS5qb2luKCdcXFxcXFwnJylcbiAgICAgIC5zcGxpdCgnXFx0Jykuam9pbignXFwnJylcbiAgICAgIC5yZXBsYWNlKC88JT0oLis/KSU+L2csICdcXCcsJDEsXFwnJylcbiAgICAgIC5yZXBsYWNlKC88JS0oLis/KSU+L2csICdcXCcsdGhpcy5lc2NhcGUoJDEpLFxcJycpXG4gICAgICAuc3BsaXQoJzwlJykuam9pbignXFwnKTsnKVxuICAgICAgLnNwbGl0KCclPicpLmpvaW4oJ19fcC5wdXNoKFxcJycpICtcbiAgICAnXFwnKTtyZXR1cm4gX19wLmpvaW4oXFwnXFwnKTsnXG4gICkpLmJpbmQoe1xuICAgICdkZWZhdWx0cyc6IGRlZmF1bHRzLFxuICAgICdnbG9iYWxzJzogdGVtcGxhdGUuZ2xvYmFscyxcbiAgICAnZXNjYXBlJzogdGVtcGxhdGUuZXNjYXBlXG4gIH0pO1xuICAvKmpzaGludCBldmlsOiBmYWxzZSovXG5cbiAgdGVtcGxhdGUuY2FjaGVbc3RyXSA9IHRwbDtcblxuICByZXR1cm4gdHBsO1xufTtcblxuLyoqXG4gKiBHbG9iYWxzIGFyZSBtZXJnZWQgaW50byBgbG9jYWxzYFxuICovXG50ZW1wbGF0ZS5nbG9iYWxzID0ge307XG5cbi8qKlxuICogQ2FjaGVcbiAqL1xudGVtcGxhdGUuY2FjaGUgPSB7fTtcblxuLyoqXG4gKiBFc2NhcGUgZnVuY3Rpb24gZm9yIDwlLSB2YXJpYWJsZSAlPiwgY2FuIGJlIG92ZXJyaWRkZW4gKGRlZmF1bHQgZXNjYXBlIEhUTUwpXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbnRlbXBsYXRlLmVzY2FwZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIChzdHIgKyAnJylcbiAgICAucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxuICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAucmVwbGFjZSgvPi9nLCAnJmd0JylcbiAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgLnJlcGxhY2UoLycvZywgJyYjMzknKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVyZ2UgZGVmYXVsdCB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0c1xuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xudmFyIGRlZmF1bHRzID0gZnVuY3Rpb24gKGRlc3QsIHNyYywgcmVjdXJzaXZlKSB7XG4gIGZvciAodmFyIHByb3AgaW4gc3JjKSB7XG4gICAgaWYgKHJlY3Vyc2l2ZSAmJiBkZXN0W3Byb3BdIGluc3RhbmNlb2YgT2JqZWN0ICYmIHNyY1twcm9wXSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgZGVzdFtwcm9wXSA9IGRlZmF1bHRzKGRlc3RbcHJvcF0sIHNyY1twcm9wXSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmICghIChwcm9wIGluIGRlc3QpKSB7XG4gICAgICBkZXN0W3Byb3BdID0gc3JjW3Byb3BdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkZXN0O1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYGRlZmF1bHRzYC5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyByZXNvbHZlcyAuIGFuZCAuLiBlbGVtZW50cyBpbiBhIHBhdGggYXJyYXkgd2l0aCBkaXJlY3RvcnkgbmFtZXMgdGhlcmVcbi8vIG11c3QgYmUgbm8gc2xhc2hlcywgZW1wdHkgZWxlbWVudHMsIG9yIGRldmljZSBuYW1lcyAoYzpcXCkgaW4gdGhlIGFycmF5XG4vLyAoc28gYWxzbyBubyBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzIC0gaXQgZG9lcyBub3QgZGlzdGluZ3Vpc2hcbi8vIHJlbGF0aXZlIGFuZCBhYnNvbHV0ZSBwYXRocylcbmZ1bmN0aW9uIG5vcm1hbGl6ZUFycmF5KHBhcnRzLCBhbGxvd0Fib3ZlUm9vdCkge1xuICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMFxuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gcGFydHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgbGFzdCA9IHBhcnRzW2ldO1xuICAgIGlmIChsYXN0ID09PSAnLicpIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXAtLTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGUgcGF0aCBpcyBhbGxvd2VkIHRvIGdvIGFib3ZlIHRoZSByb290LCByZXN0b3JlIGxlYWRpbmcgLi5zXG4gIGlmIChhbGxvd0Fib3ZlUm9vdCkge1xuICAgIGZvciAoOyB1cC0tOyB1cCkge1xuICAgICAgcGFydHMudW5zaGlmdCgnLi4nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFydHM7XG59XG5cbi8vIFNwbGl0IGEgZmlsZW5hbWUgaW50byBbcm9vdCwgZGlyLCBiYXNlbmFtZSwgZXh0XSwgdW5peCB2ZXJzaW9uXG4vLyAncm9vdCcgaXMganVzdCBhIHNsYXNoLCBvciBub3RoaW5nLlxudmFyIHNwbGl0UGF0aFJlID1cbiAgICAvXihcXC8/fCkoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz98KShcXC5bXi5cXC9dKnwpKSg/OltcXC9dKikkLztcbnZhciBzcGxpdFBhdGggPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICByZXR1cm4gc3BsaXRQYXRoUmUuZXhlYyhmaWxlbmFtZSkuc2xpY2UoMSk7XG59O1xuXG4vLyBwYXRoLnJlc29sdmUoW2Zyb20gLi4uXSwgdG8pXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLnJlc29sdmUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJlc29sdmVkUGF0aCA9ICcnLFxuICAgICAgcmVzb2x2ZWRBYnNvbHV0ZSA9IGZhbHNlO1xuXG4gIGZvciAodmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSA+PSAtMSAmJiAhcmVzb2x2ZWRBYnNvbHV0ZTsgaS0tKSB7XG4gICAgdmFyIHBhdGggPSAoaSA+PSAwKSA/IGFyZ3VtZW50c1tpXSA6IHByb2Nlc3MuY3dkKCk7XG5cbiAgICAvLyBTa2lwIGVtcHR5IGFuZCBpbnZhbGlkIGVudHJpZXNcbiAgICBpZiAodHlwZW9mIHBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5ncycpO1xuICAgIH0gZWxzZSBpZiAoIXBhdGgpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHJlc29sdmVkUGF0aCA9IHBhdGggKyAnLycgKyByZXNvbHZlZFBhdGg7XG4gICAgcmVzb2x2ZWRBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG4gIH1cblxuICAvLyBBdCB0aGlzIHBvaW50IHRoZSBwYXRoIHNob3VsZCBiZSByZXNvbHZlZCB0byBhIGZ1bGwgYWJzb2x1dGUgcGF0aCwgYnV0XG4gIC8vIGhhbmRsZSByZWxhdGl2ZSBwYXRocyB0byBiZSBzYWZlIChtaWdodCBoYXBwZW4gd2hlbiBwcm9jZXNzLmN3ZCgpIGZhaWxzKVxuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICByZXNvbHZlZFBhdGggPSBub3JtYWxpemVBcnJheShmaWx0ZXIocmVzb2x2ZWRQYXRoLnNwbGl0KCcvJyksIGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gISFwO1xuICB9KSwgIXJlc29sdmVkQWJzb2x1dGUpLmpvaW4oJy8nKTtcblxuICByZXR1cm4gKChyZXNvbHZlZEFic29sdXRlID8gJy8nIDogJycpICsgcmVzb2x2ZWRQYXRoKSB8fCAnLic7XG59O1xuXG4vLyBwYXRoLm5vcm1hbGl6ZShwYXRoKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5ub3JtYWxpemUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHZhciBpc0Fic29sdXRlID0gZXhwb3J0cy5pc0Fic29sdXRlKHBhdGgpLFxuICAgICAgdHJhaWxpbmdTbGFzaCA9IHN1YnN0cihwYXRoLCAtMSkgPT09ICcvJztcblxuICAvLyBOb3JtYWxpemUgdGhlIHBhdGhcbiAgcGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihwYXRoLnNwbGl0KCcvJyksIGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gISFwO1xuICB9KSwgIWlzQWJzb2x1dGUpLmpvaW4oJy8nKTtcblxuICBpZiAoIXBhdGggJiYgIWlzQWJzb2x1dGUpIHtcbiAgICBwYXRoID0gJy4nO1xuICB9XG4gIGlmIChwYXRoICYmIHRyYWlsaW5nU2xhc2gpIHtcbiAgICBwYXRoICs9ICcvJztcbiAgfVxuXG4gIHJldHVybiAoaXNBYnNvbHV0ZSA/ICcvJyA6ICcnKSArIHBhdGg7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmlzQWJzb2x1dGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xufTtcblxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5qb2luID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwYXRocyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gIHJldHVybiBleHBvcnRzLm5vcm1hbGl6ZShmaWx0ZXIocGF0aHMsIGZ1bmN0aW9uKHAsIGluZGV4KSB7XG4gICAgaWYgKHR5cGVvZiBwICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGguam9pbiBtdXN0IGJlIHN0cmluZ3MnKTtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH0pLmpvaW4oJy8nKSk7XG59O1xuXG5cbi8vIHBhdGgucmVsYXRpdmUoZnJvbSwgdG8pXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLnJlbGF0aXZlID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgZnJvbSA9IGV4cG9ydHMucmVzb2x2ZShmcm9tKS5zdWJzdHIoMSk7XG4gIHRvID0gZXhwb3J0cy5yZXNvbHZlKHRvKS5zdWJzdHIoMSk7XG5cbiAgZnVuY3Rpb24gdHJpbShhcnIpIHtcbiAgICB2YXIgc3RhcnQgPSAwO1xuICAgIGZvciAoOyBzdGFydCA8IGFyci5sZW5ndGg7IHN0YXJ0KyspIHtcbiAgICAgIGlmIChhcnJbc3RhcnRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgdmFyIGVuZCA9IGFyci5sZW5ndGggLSAxO1xuICAgIGZvciAoOyBlbmQgPj0gMDsgZW5kLS0pIHtcbiAgICAgIGlmIChhcnJbZW5kXSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIGlmIChzdGFydCA+IGVuZCkgcmV0dXJuIFtdO1xuICAgIHJldHVybiBhcnIuc2xpY2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7XG4gIH1cblxuICB2YXIgZnJvbVBhcnRzID0gdHJpbShmcm9tLnNwbGl0KCcvJykpO1xuICB2YXIgdG9QYXJ0cyA9IHRyaW0odG8uc3BsaXQoJy8nKSk7XG5cbiAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGZyb21QYXJ0cy5sZW5ndGgsIHRvUGFydHMubGVuZ3RoKTtcbiAgdmFyIHNhbWVQYXJ0c0xlbmd0aCA9IGxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmIChmcm9tUGFydHNbaV0gIT09IHRvUGFydHNbaV0pIHtcbiAgICAgIHNhbWVQYXJ0c0xlbmd0aCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB2YXIgb3V0cHV0UGFydHMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IHNhbWVQYXJ0c0xlbmd0aDsgaSA8IGZyb21QYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIG91dHB1dFBhcnRzLnB1c2goJy4uJyk7XG4gIH1cblxuICBvdXRwdXRQYXJ0cyA9IG91dHB1dFBhcnRzLmNvbmNhdCh0b1BhcnRzLnNsaWNlKHNhbWVQYXJ0c0xlbmd0aCkpO1xuXG4gIHJldHVybiBvdXRwdXRQYXJ0cy5qb2luKCcvJyk7XG59O1xuXG5leHBvcnRzLnNlcCA9ICcvJztcbmV4cG9ydHMuZGVsaW1pdGVyID0gJzonO1xuXG5leHBvcnRzLmRpcm5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHZhciByZXN1bHQgPSBzcGxpdFBhdGgocGF0aCksXG4gICAgICByb290ID0gcmVzdWx0WzBdLFxuICAgICAgZGlyID0gcmVzdWx0WzFdO1xuXG4gIGlmICghcm9vdCAmJiAhZGlyKSB7XG4gICAgLy8gTm8gZGlybmFtZSB3aGF0c29ldmVyXG4gICAgcmV0dXJuICcuJztcbiAgfVxuXG4gIGlmIChkaXIpIHtcbiAgICAvLyBJdCBoYXMgYSBkaXJuYW1lLCBzdHJpcCB0cmFpbGluZyBzbGFzaFxuICAgIGRpciA9IGRpci5zdWJzdHIoMCwgZGlyLmxlbmd0aCAtIDEpO1xuICB9XG5cbiAgcmV0dXJuIHJvb3QgKyBkaXI7XG59O1xuXG5cbmV4cG9ydHMuYmFzZW5hbWUgPSBmdW5jdGlvbihwYXRoLCBleHQpIHtcbiAgdmFyIGYgPSBzcGxpdFBhdGgocGF0aClbMl07XG4gIC8vIFRPRE86IG1ha2UgdGhpcyBjb21wYXJpc29uIGNhc2UtaW5zZW5zaXRpdmUgb24gd2luZG93cz9cbiAgaWYgKGV4dCAmJiBmLnN1YnN0cigtMSAqIGV4dC5sZW5ndGgpID09PSBleHQpIHtcbiAgICBmID0gZi5zdWJzdHIoMCwgZi5sZW5ndGggLSBleHQubGVuZ3RoKTtcbiAgfVxuICByZXR1cm4gZjtcbn07XG5cblxuZXhwb3J0cy5leHRuYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gc3BsaXRQYXRoKHBhdGgpWzNdO1xufTtcblxuZnVuY3Rpb24gZmlsdGVyICh4cywgZikge1xuICAgIGlmICh4cy5maWx0ZXIpIHJldHVybiB4cy5maWx0ZXIoZik7XG4gICAgdmFyIHJlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGYoeHNbaV0sIGksIHhzKSkgcmVzLnB1c2goeHNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG4vLyBTdHJpbmcucHJvdG90eXBlLnN1YnN0ciAtIG5lZ2F0aXZlIGluZGV4IGRvbid0IHdvcmsgaW4gSUU4XG52YXIgc3Vic3RyID0gJ2FiJy5zdWJzdHIoLTEpID09PSAnYidcbiAgICA/IGZ1bmN0aW9uIChzdHIsIHN0YXJ0LCBsZW4pIHsgcmV0dXJuIHN0ci5zdWJzdHIoc3RhcnQsIGxlbikgfVxuICAgIDogZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikge1xuICAgICAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IHN0ci5sZW5ndGggKyBzdGFydDtcbiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHIoc3RhcnQsIGxlbik7XG4gICAgfVxuO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBNZXJnZSBkZWZhdWx0IHZhbHVlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdCBkZXN0aW5hdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmMgc291cmNlIG9iamVjdFxuICogQHBhcmFtIHtCb29sZWFufSByZWN1cnNpdmUgbWVyZ2UgaW50byBkZXN0aW5hdGlvbiByZWN1cnNpdmVseSAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcmV0dXJuIHtPYmplY3R9IGRlc3Qgb2JqZWN0XG4gKi9cbnZhciBkZWZhdWx0cyA9IGZ1bmN0aW9uIChkZXN0LCBzcmMsIHJlY3Vyc2l2ZSkge1xuICBmb3IgKHZhciBwcm9wIGluIHNyYykge1xuICAgIGlmICghIHNyYy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKHJlY3Vyc2l2ZSAmJiBkZXN0W3Byb3BdIGluc3RhbmNlb2YgT2JqZWN0ICYmIHNyY1twcm9wXSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgZGVzdFtwcm9wXSA9IGRlZmF1bHRzKGRlc3RbcHJvcF0sIHNyY1twcm9wXSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmICghIChwcm9wIGluIGRlc3QpKSB7XG4gICAgICBkZXN0W3Byb3BdID0gc3JjW3Byb3BdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkZXN0O1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYGRlZmF1bHRzYC5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcbiJdfQ=="}